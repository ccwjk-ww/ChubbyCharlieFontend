import{a as T}from"./chunk-LD5BFJQC.js";import{b as k,c as d,d as E,e as S,h as A,j as I,m as N,t as z,v as j}from"./chunk-32P7OPYT.js";import{b as w,d as y}from"./chunk-ACYYDNGN.js";import"./chunk-ZATVBB7N.js";import{Bb as i,Cb as _,Db as M,Ha as r,La as u,Ra as P,Wa as x,gc as O,hb as c,ib as n,jb as o,jc as F,kb as l,rb as v,zb as C}from"./chunk-45HGJHZR.js";function G(m,t){m&1&&(n(0,"div",20),i(1," Customer name is required and must be at least 2 characters "),o())}function R(m,t){m&1&&(n(0,"div",20),i(1," Address is required and must be at least 5 characters "),o())}function q(m,t){m&1&&(n(0,"div",20),i(1," Please enter a valid phone number (10-11 digits) "),o())}var B=class m{constructor(t,s,e,a){this.fb=t;this.customerService=s;this.router=e;this.route=a;this.customerForm=this.fb.group({customerName:["",[d.required,d.minLength(2)]],customerAddress:["",[d.required,d.minLength(5)]],customerPhone:["",[d.required,d.pattern(/^[0-9]{9,11}$/)]]})}customerForm;isEditMode=!1;customerId=null;ngOnInit(){this.customerId=this.route.snapshot.paramMap.get("id")?Number(this.route.snapshot.paramMap.get("id")):null,this.isEditMode=!!this.customerId,this.isEditMode&&this.loadCustomer()}loadCustomer(){this.customerId&&this.customerService.getCustomerById(this.customerId).subscribe({next:t=>{this.customerForm.patchValue({customerName:t.customerName,customerAddress:t.customerAddress,customerPhone:t.customerPhone})},error:t=>console.error("Error loading customer:",t)})}onSubmit(){if(this.customerForm.valid){let t=this.customerForm.value;this.isEditMode&&this.customerId?this.customerService.updateCustomer(this.customerId,t).subscribe({next:()=>{alert("Customer updated successfully!"),this.router.navigate(["/customers"])},error:s=>console.error("Error updating customer:",s)}):this.customerService.createCustomer(t).subscribe({next:()=>{alert("Customer added successfully!"),this.resetForm(),this.router.navigate(["/customers"])},error:s=>console.error("Error adding customer:",s)})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.customerForm.controls).forEach(t=>{this.customerForm.get(t)?.markAsTouched()})}resetForm(){this.customerForm.reset()}goBack(){this.router.navigate(["/customers"])}static \u0275fac=function(s){return new(s||m)(u(z),u(T),u(y),u(w))};static \u0275cmp=P({type:m,selectors:[["app-customer-add"]],decls:34,vars:14,consts:[[1,"main-container"],[1,"container"],[1,"page-header"],[1,"customer-form",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-fields"],[1,"field-row"],[1,"form-group"],["for","customerName"],["id","customerName","formControlName","customerName","placeholder","Enter customer name",1,"form-control"],["class","error-message",4,"ngIf"],["for","customerAddress"],["id","customerAddress","formControlName","customerAddress","placeholder","Enter customer address",1,"form-control"],["for","customerPhone"],["id","customerPhone","formControlName","customerPhone","placeholder","Enter phone number",1,"form-control"],[1,"form-actions"],["type","button",1,"back-btn",3,"click"],[1,"fas","fa-arrow-left"],["type","submit",1,"submit-btn",3,"disabled"],[1,"fas","fa-plus"],[1,"error-message"]],template:function(s,e){if(s&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),i(4),o(),n(5,"p"),i(6),o()(),n(7,"form",3),v("ngSubmit",function(){return e.onSubmit()}),n(8,"div",4)(9,"div",5)(10,"div",6)(11,"div",7)(12,"label",8),i(13,"Customer Name"),o(),l(14,"input",9),x(15,G,2,0,"div",10),o(),n(16,"div",7)(17,"label",11),i(18,"Address"),o(),l(19,"input",12),x(20,R,2,0,"div",10),o()(),n(21,"div",6)(22,"div",7)(23,"label",13),i(24,"Phone Number"),o(),l(25,"input",14),x(26,q,2,0,"div",10),o()()()(),n(27,"div",15)(28,"button",16),v("click",function(){return e.goBack()}),l(29,"i",17),i(30," Back "),o(),n(31,"button",18),l(32,"i",19),i(33),o()()()()()),s&2){let a,p,f,g,b,h;r(4),_(e.isEditMode?"Edit Customer":"New Customer"),r(2),_(e.isEditMode?"Update customer details":"Create new customer"),r(),c("formGroup",e.customerForm),r(7),C("error",((a=e.customerForm.get("customerName"))==null?null:a.invalid)&&((a=e.customerForm.get("customerName"))==null?null:a.touched)),r(),c("ngIf",((p=e.customerForm.get("customerName"))==null?null:p.invalid)&&((p=e.customerForm.get("customerName"))==null?null:p.touched)),r(4),C("error",((f=e.customerForm.get("customerAddress"))==null?null:f.invalid)&&((f=e.customerForm.get("customerAddress"))==null?null:f.touched)),r(),c("ngIf",((g=e.customerForm.get("customerAddress"))==null?null:g.invalid)&&((g=e.customerForm.get("customerAddress"))==null?null:g.touched)),r(5),C("error",((b=e.customerForm.get("customerPhone"))==null?null:b.invalid)&&((b=e.customerForm.get("customerPhone"))==null?null:b.touched)),r(),c("ngIf",((h=e.customerForm.get("customerPhone"))==null?null:h.invalid)&&((h=e.customerForm.get("customerPhone"))==null?null:h.touched)),r(5),c("disabled",e.customerForm.invalid),r(2),M(" ",e.isEditMode?"Update Customer":"Add Customer"," ")}},dependencies:[j,A,k,E,S,I,N,F,O],styles:[".main-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;margin:1rem;padding:1.5rem;background-color:#fff;border-radius:1rem;box-shadow:0 2px 8px #0000000d;border:1px solid #e5e7eb;min-height:calc(100vh - 2rem);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;box-sizing:border-box}.container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.back-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#495057);border:none;color:#fff;padding:14px 32px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:140px;display:flex;align-items:center;gap:8px;justify-content:center;box-shadow:0 2px 8px #00000026}.back-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#495057,#343a40);transform:translateY(-2px);box-shadow:0 4px 12px #0003}.back-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #00000026}.back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.page-header[_ngcontent-%COMP%]{margin-bottom:40px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin:0 0 5px;color:#212529}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;margin:0;font-size:16px}.customer-form[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:40px;box-shadow:0 2px 20px #00000014;border:1px solid #e9ecef}.form-row[_ngcontent-%COMP%]{display:block;margin-bottom:40px}.form-fields[_ngcontent-%COMP%]{flex:1}.field-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:25px}.form-group[_ngcontent-%COMP%]{flex:1;position:relative}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#212529;font-size:14px}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #dee2e6;border-radius:8px;font-size:14px;transition:all .3s ease;background-color:#fff;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 3px #007bff1a;background-color:#fff}.form-control[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.form-control.error[_ngcontent-%COMP%]{border-color:#dc3545;background-color:#fff5f5}.form-control.error[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 3px #dc35451a}.error-message[_ngcontent-%COMP%]{margin-top:5px;font-size:12px;color:#dc3545;font-weight:500}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;gap:20px;padding:20px 0;border-top:1px solid #e9ecef}.submit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;border:none;padding:14px 32px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:140px;display:flex;align-items:center;gap:8px;justify-content:center}.submit-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 15px #007bff4d;background:linear-gradient(135deg,#0056b3,#004085)}.submit-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none;opacity:.6}@media (max-width: 1024px){.container[_ngcontent-%COMP%]{padding:15px}.customer-form[_ngcontent-%COMP%]{padding:30px}}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:10px}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:30px}.field-row[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.customer-form[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}}@media (max-width: 480px){.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.customer-form[_ngcontent-%COMP%]{padding:15px}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:16px}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}.submit-btn[_ngcontent-%COMP%]:active{animation:_ngcontent-%COMP%_pulse .3s ease-in-out}"]})};export{B as CustomerAddComponent};
