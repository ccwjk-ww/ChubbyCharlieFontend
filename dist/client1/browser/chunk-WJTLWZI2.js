import{a as R}from"./chunk-QSMWRQZS.js";import{b as I,d as T,g as D,n as N,o as A,p as V,t as z}from"./chunk-OKAB5353.js";import{d as E}from"./chunk-ACYYDNGN.js";import"./chunk-ZATVBB7N.js";import{Ab as w,Bb as i,Cb as f,Gb as S,Ha as c,Hb as C,Ib as P,La as x,Ra as L,Wa as k,Z as p,_,fc as M,gc as O,hb as u,ib as n,jb as o,jc as y,kb as m,qb as b,rb as g,tb as d,yb as v,zb as h}from"./chunk-45HGJHZR.js";function j(s,t){s&1&&(n(0,"div",39),m(1,"div",40),n(2,"p"),i(3,"Loading stock lot data..."),o()())}function B(s,t){if(s&1){let e=b();n(0,"li")(1,"button",55),g("click",function(){p(e);let a=d().$implicit,l=d(2);return _(l.updateStockLotStatus(a,"IN_TRANSIT"))}),m(2,"i",60),i(3," Mark In Transit "),o()()}}function G(s,t){if(s&1){let e=b();n(0,"li")(1,"button",55),g("click",function(){p(e);let a=d().$implicit,l=d(2);return _(l.updateStockLotStatus(a,"ARRIVED"))}),m(2,"i",61),i(3," Mark Arrived "),o()()}}function $(s,t){if(s&1){let e=b();n(0,"li")(1,"button",55),g("click",function(){p(e);let a=d().$implicit,l=d(2);return _(l.updateStockLotStatus(a,"COMPLETED"))}),m(2,"i",62),i(3," Mark Completed "),o()()}}function H(s,t){if(s&1){let e=b();n(0,"tr")(1,"td",43),i(2),o(),n(3,"td",44),i(4),o(),n(5,"td",45),i(6),o(),n(7,"td",46),i(8),o(),n(9,"td",47)(10,"span"),i(11),o()(),n(12,"td",48)(13,"div",51)(14,"button",52),g("click",function(a){let l=p(e).$implicit,W=d(2);return _(W.toggleDropdown(a,l))}),i(15," Actions "),m(16,"i",53),o(),n(17,"ul",54)(18,"li")(19,"button",55),g("click",function(){let a=p(e).$implicit,l=d(2);return _(l.viewStockLotDetails(a))}),m(20,"i",56),i(21," View Details "),o()(),n(22,"li")(23,"button",55),g("click",function(){let a=p(e).$implicit,l=d(2);return _(l.editStockLot(a))}),m(24,"i",57),i(25," Edit "),o()(),k(26,B,4,0,"li",50)(27,G,4,0,"li",50)(28,$,4,0,"li",50),n(29,"li")(30,"button",58),g("click",function(){let a=p(e).$implicit,l=d(2);return _(l.deleteStockLot(a))}),m(31,"i",59),i(32," Delete "),o()()()()()()}if(s&2){let e=t.$implicit,r=t.index,a=d(2);c(2),f(a.getRowNumber(r)),c(2),f(e.lotName),c(2),f(a.formatDate(e.importDate)),c(2),f(a.formatDate(e.arrivalDate)),c(2),w(a.getStatusClass(e.status)),c(),f(e.status||"N/A"),c(6),h("show",a.isDropdownOpen&&a.activeStockLot===e),c(9),u("ngIf",e.status==="PENDING"),c(),u("ngIf",e.status==="ARRIVED"),c(),u("ngIf",e.status==="COMPLETED")}}function U(s,t){s&1&&(n(0,"tr")(1,"td",63),m(2,"i",4),n(3,"p"),i(4,"No stock lots found"),o()()())}function Y(s,t){if(s&1&&(n(0,"div",41)(1,"table",42)(2,"thead")(3,"tr")(4,"th",43),i(5,"S/N"),o(),n(6,"th",44),i(7,"Lot Name"),o(),n(8,"th",45),i(9,"Import Date"),o(),n(10,"th",46),i(11,"Arrival Date"),o(),n(12,"th",47),i(13,"Status"),o(),n(14,"th",48),i(15,"Action"),o()()(),n(16,"tbody"),k(17,H,33,12,"tr",49)(18,U,5,0,"tr",50),o()()()),s&2){let e=d();c(17),u("ngForOf",e.paginatedStockLots),c(),u("ngIf",e.filteredStockLots.length===0&&!e.loading)}}function q(s,t){if(s&1){let e=b();n(0,"div",64)(1,"nav")(2,"ul",65)(3,"li",66)(4,"a",67),g("click",function(){p(e);let a=d();return _(a.goToPage(a.currentPage-1))}),m(5,"i",68),o()(),n(6,"li",66)(7,"a",67),g("click",function(){p(e);let a=d();return _(a.goToPage(a.currentPage+1))}),m(8,"i",69),o()()()()()}if(s&2){let e=d();c(3),h("disabled",e.currentPage===1),c(),v("cursor",e.currentPage===1?"not-allowed":"pointer"),c(2),h("disabled",e.currentPage===e.totalPages),c(),v("cursor",e.currentPage===e.totalPages?"not-allowed":"pointer")}}var F=class s{constructor(t,e){this.stockLotService=t;this.router=e}filteredStockLots=[];paginatedStockLots=[];searchTerm="";currentPage=1;itemsPerPage=10;totalPages=1;loading=!1;selectedStatus="ALL";isDropdownOpen=!1;activeStockLot=null;ngOnInit(){this.loadStockLots()}get totalStockLots(){return this.filteredStockLots.length}loadStockLots(){this.loading=!0,this.stockLotService.getAllStockLots().subscribe({next:t=>{this.filteredStockLots=t,this.applyFilters(),this.loading=!1},error:t=>{console.error("Error loading stock lots:",t),this.loading=!1}})}onSearch(){this.currentPage=1,this.applyFilters()}onFilterChange(){this.currentPage=1,this.applyFilters()}applyFilters(){let t=[...this.filteredStockLots];if(this.searchTerm.trim()){let e=this.searchTerm.toLowerCase().trim();t=t.filter(r=>r.lotName.toLowerCase().includes(e))}this.selectedStatus!=="ALL"&&(t=t.filter(e=>e.status===this.selectedStatus)),this.filteredStockLots=t,this.calculatePagination(),this.updatePaginatedData()}calculatePagination(){this.totalPages=Math.ceil(this.filteredStockLots.length/this.itemsPerPage),this.currentPage>this.totalPages&&this.totalPages>0&&(this.currentPage=this.totalPages)}updatePaginatedData(){let t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;this.paginatedStockLots=this.filteredStockLots.slice(t,e)}onItemsPerPageChange(){this.currentPage=1,this.calculatePagination(),this.updatePaginatedData()}goToPage(t){t>=1&&t<=this.totalPages&&t!==this.currentPage&&(this.currentPage=t,this.updatePaginatedData())}getRowNumber(t){return(this.currentPage-1)*this.itemsPerPage+t+1}viewStockLotDetails(t){this.router.navigate(["/stock-lots",t.stockLotId])}openAddStockLotModal(){this.router.navigate(["/stock-lots/add"])}editStockLot(t){this.router.navigate(["/stock-lots/edit",t.stockLotId]),this.closeDropdown()}updateStockLotStatus(t,e){t.stockLotId&&this.stockLotService.updateStockLotStatus(t.stockLotId,e).subscribe({next:()=>{this.loadStockLots(),this.closeDropdown()},error:r=>console.error("Error updating stock lot status:",r)})}deleteStockLot(t){confirm(`Are you sure you want to delete ${t.lotName}?`)&&t.stockLotId&&this.stockLotService.deleteStockLot(t.stockLotId).subscribe({next:()=>{this.loadStockLots(),this.closeDropdown()},error:e=>console.error("Error deleting stock lot:",e)})}getStatusClass(t){switch(t){case"PENDING":return"badge badge-yellow";case"IN_TRANSIT":return"badge badge-blue";case"ARRIVED":return"badge badge-green";case"COMPLETED":return"badge badge-green";case"CANCELLED":return"badge badge-red";default:return"badge badge-gray"}}toggleDropdown(t,e){t.stopPropagation(),this.activeStockLot===e?this.closeDropdown():(this.activeStockLot=e,this.isDropdownOpen=!0)}closeDropdown(){this.isDropdownOpen=!1,this.activeStockLot=null}formatDate(t){return t?new Date(t).toLocaleDateString():"N/A"}formatCurrency(t){return t?new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(t):"\u0E3F0.00"}static \u0275fac=function(e){return new(e||s)(x(R),x(E))};static \u0275cmp=L({type:s,selectors:[["app-stock-lot"]],decls:60,vars:7,consts:[[1,"stock-lot-container"],[1,"stock-lot-header"],[1,"stock-lot-header-top"],[1,"stock-lot-icon"],[1,"bi-shop-window"],[1,"stock-lot-title"],[1,"stock-lot-subtitle"],[1,"stock-lot-controls"],[1,"stock-lot-controls-left"],[1,"search-container"],[1,"bi-search","search-icon"],["type","text","placeholder","Search by lot name...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"stats-card"],[1,"stats-number"],[1,"stats-label"],[1,"stock-lot-controls-right"],[1,"filter-section"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value","ALL"],["value","PENDING"],["value","IN_TRANSIT"],["value","ARRIVED"],["value","COMPLETED"],["value","CANCELLED"],[1,"add-stock-lot-btn",3,"click"],[1,"bi-plus"],[1,"stock-lot-table-container"],[1,"stock-lot-table-header"],[1,"table-title"],[1,"table-controls"],[1,"per-page-selector"],[1,"per-page-select",3,"ngModelChange","change","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],["class","loading-container",4,"ngIf"],["class","table-wrapper",4,"ngIf"],["class","pagination-container",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"table-wrapper"],[1,"stock-lot-table"],[1,"col-sn"],[1,"col-lot-name"],[1,"col-import-date"],[1,"col-arrival-date"],[1,"col-status"],[1,"col-action"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"action-dropdown"],[1,"action-btn",3,"click"],[1,"bi","bi-chevron-down"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"bi-eye"],[1,"bi-pencil"],[1,"dropdown-item","delete-item",3,"click"],[1,"bi-trash"],[1,"bi-truck"],[1,"bi-check-circle"],[1,"bi-check-all"],["colspan","7",1,"empty-state"],[1,"pagination-container"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click"],[1,"bi-chevron-left"],[1,"bi-chevron-right"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m(4,"i",4),o(),n(5,"div",5)(6,"h1"),i(7,"Stock Lots"),o(),n(8,"p",6),i(9,"Manage your stock lot inventory and shipments"),o()()(),n(10,"div",7)(11,"div",8)(12,"div",9),m(13,"i",10),n(14,"input",11),P("ngModelChange",function(l){return C(r.searchTerm,l)||(r.searchTerm=l),l}),g("input",function(){return r.onSearch()}),o()(),n(15,"div",12)(16,"div",13),i(17),o(),n(18,"div",14),i(19,"Total Stock Lots"),o()()(),n(20,"div",15)(21,"div",16)(22,"select",17),P("ngModelChange",function(l){return C(r.selectedStatus,l)||(r.selectedStatus=l),l}),g("change",function(){return r.onFilterChange()}),n(23,"option",18),i(24,"All Statuses"),o(),n(25,"option",19),i(26,"Pending"),o(),n(27,"option",20),i(28,"In Transit"),o(),n(29,"option",21),i(30,"Arrived"),o(),n(31,"option",22),i(32,"Completed"),o(),n(33,"option",23),i(34,"Cancelled"),o()()(),n(35,"button",24),g("click",function(){return r.openAddStockLotModal()}),m(36,"i",25),i(37," Add New Stock Lot "),o()()()(),n(38,"div",26)(39,"div",27)(40,"h3",28),i(41,"All Stock Lots"),o(),n(42,"div",29)(43,"div",30)(44,"span"),i(45,"Showing"),o(),n(46,"select",31),P("ngModelChange",function(l){return C(r.itemsPerPage,l)||(r.itemsPerPage=l),l}),g("change",function(){return r.onItemsPerPageChange()}),n(47,"option",32),i(48,"10"),o(),n(49,"option",33),i(50,"25"),o(),n(51,"option",34),i(52,"50"),o(),n(53,"option",35),i(54,"100"),o()(),n(55,"span"),i(56,"per page"),o()()()(),k(57,j,4,0,"div",36)(58,Y,19,2,"div",37)(59,q,9,8,"div",38),o()()),e&2&&(c(14),S("ngModel",r.searchTerm),c(3),f(r.totalStockLots),c(5),S("ngModel",r.selectedStatus),c(24),S("ngModel",r.itemsPerPage),c(11),u("ngIf",r.loading),c(),u("ngIf",!r.loading),c(),u("ngIf",!r.loading&&r.filteredStockLots.length>0))},dependencies:[y,M,O,z,A,V,I,N,T,D],styles:[".stock-lot-container[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem;background-color:#fff;border-radius:1rem;box-shadow:0 2px 8px #0000000d;border:1px solid #e5e7eb;min-height:calc(100vh - 2rem);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;box-sizing:border-box}.stock-lot-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #e5e7eb}.stock-lot-header-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.stock-lot-icon[_ngcontent-%COMP%]{width:40px;height:40px;background-color:#f0f9ff;border-radius:10px;display:flex;align-items:center;justify-content:center;color:#0ea5e9;font-size:1.25rem}.stock-lot-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1f2937;font-size:1.5rem;font-weight:700;margin:0}.stock-lot-subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:.9rem;margin:.5rem 0 0}.stock-lot-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1.5rem;flex-wrap:wrap}.stock-lot-controls-left[_ngcontent-%COMP%], .stock-lot-controls-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1}.search-container[_ngcontent-%COMP%]{position:relative;flex:1;max-width:400px}.search-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 2.5rem;border:1px solid #d1d5db;border-radius:.5rem;font-size:.9rem;transition:all .2s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0ea5e9;box-shadow:0 0 0 3px #0ea5e91a}.search-icon[_ngcontent-%COMP%]{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:#9ca3af;font-size:1rem}.stats-card[_ngcontent-%COMP%]{background-color:#f8fafc;border:1px solid #e5e7eb;border-radius:.75rem;padding:1rem;text-align:center;min-width:120px}.stats-number[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1f2937}.stats-label[_ngcontent-%COMP%]{font-size:.85rem;color:#6b7280;margin-top:.25rem}.filter-select[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #d1d5db;border-radius:.5rem;font-size:.9rem;background-color:#fff;min-width:150px}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#0ea5e9;box-shadow:0 0 0 3px #0ea5e91a}.add-stock-lot-btn[_ngcontent-%COMP%]{background-color:#0ea5e9;color:#fff;border:none;padding:.75rem 1.25rem;border-radius:.5rem;font-size:.9rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:all .2s ease}.add-stock-lot-btn[_ngcontent-%COMP%]:hover{background-color:#0284c7;box-shadow:0 4px 12px #0ea5e933}.stock-lot-table-container[_ngcontent-%COMP%]{margin-top:1rem;border-radius:.75rem;overflow:hidden}.stock-lot-table-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid #f3f4f6;display:flex;justify-content:space-between;align-items:center}.table-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#1f2937;margin:0}.per-page-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.85rem;color:#6b7280}.per-page-select[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #d1d5db;border-radius:.5rem;font-size:.85rem}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.stock-lot-table[_ngcontent-%COMP%]{width:100%;min-width:1000px;border-collapse:collapse}.stock-lot-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .stock-lot-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #e5e7eb;font-size:.9rem}.stock-lot-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f9fafb;font-weight:600;color:#374151}.stock-lot-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.col-sn[_ngcontent-%COMP%]{width:5%;text-align:center}.col-lot-name[_ngcontent-%COMP%]{width:25%}.col-import-date[_ngcontent-%COMP%], .col-arrival-date[_ngcontent-%COMP%]{width:15%}.col-shipping[_ngcontent-%COMP%]{width:15%;text-align:right}.col-status[_ngcontent-%COMP%]{width:10%;text-align:center}.col-action[_ngcontent-%COMP%]{width:15%;text-align:center}.badge[_ngcontent-%COMP%]{padding:.3rem .6rem;font-size:.8rem;border-radius:.5rem;font-weight:500;display:inline-block}.badge-yellow[_ngcontent-%COMP%]{background-color:#fef3c7;color:#d97706}.badge-blue[_ngcontent-%COMP%]{background-color:#dbeafe;color:#2563eb}.badge-green[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46}.badge-red[_ngcontent-%COMP%]{background-color:#fee2e2;color:#dc2626}.badge-gray[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151}.action-dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.action-btn[_ngcontent-%COMP%]{background:#0ea5e9;border:1px solid #d1d5db;padding:.4rem 1rem;border-radius:.4rem;font-size:.8rem;cursor:pointer;display:flex;align-items:center;gap:.25rem;color:#fff;transition:all .2s ease}.action-btn[_ngcontent-%COMP%]:hover{background-color:#0284c7}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background-color:#fff;border:1px solid #e5e7eb;border-radius:.4rem;box-shadow:0 4px 12px #0000001a;list-style:none;padding:.25rem 0;margin:.25rem 0 0;display:none;z-index:1000;min-width:180px}.dropdown-menu.show[_ngcontent-%COMP%]{display:block}.dropdown-item[_ngcontent-%COMP%]{padding:.6rem 1rem;font-size:.8rem;color:#374151;cursor:pointer;width:100%;text-align:left;border:none;background:none;transition:all .2s ease;display:flex;align-items:center;gap:.5rem}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f1f5f9;color:#0ea5e9}.dropdown-item.delete-item[_ngcontent-%COMP%]:hover{background-color:#fee2e2;color:#dc2626}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem}.pagination-container[_ngcontent-%COMP%]{padding:1.5rem;display:flex;justify-content:center}.pagination[_ngcontent-%COMP%]{display:flex;gap:.5rem;list-style:none;padding:0;margin:0}.page-item[_ngcontent-%COMP%]{display:flex}.page-link[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid #d1d5db;border-radius:.5rem;font-size:.9rem;color:#374151;cursor:pointer;transition:all .2s ease;text-decoration:none}.page-link[_ngcontent-%COMP%]:hover, .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#0ea5e9;color:#fff;border-color:#0ea5e9}.page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#d1d5db;cursor:not-allowed}.loading-container[_ngcontent-%COMP%]{padding:3rem;text-align:center;color:#6b7280}.loading-spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:4px solid #e5e7eb;border-top:4px solid #0ea5e9;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{padding:3rem;text-align:center;color:#6b7280;font-size:1rem}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;color:#d1d5db}"]})};export{F as StockLotComponent};
