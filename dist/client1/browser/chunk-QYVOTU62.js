import{a as M}from"./chunk-QSMWRQZS.js";import{b as v,d as S}from"./chunk-ACYYDNGN.js";import"./chunk-ZATVBB7N.js";import{Bb as o,Cb as p,Db as f,Ha as a,La as b,Ra as k,Wa as _,Z as E,_ as m,ec as x,fc as h,gc as P,hb as l,ib as n,jb as i,jc as L,kb as d,qb as C,rb as g,tb as s}from"./chunk-45HGJHZR.js";function y(u,e){if(u&1&&(n(0,"span"),o(1),i()),u&2){let t=s().$implicit;a(),f("\u0E08\u0E33\u0E19\u0E27\u0E19: ",t.quantity)}}function D(u,e){if(u&1&&(n(0,"span"),o(1),i()),u&2){let t=s().$implicit,c=s(3);a(),f("\u0E23\u0E32\u0E04\u0E32/\u0E2B\u0E19\u0E48\u0E27\u0E22: ",c.formatCurrency(c.getItemUnitPrice(t)))}}function w(u,e){if(u&1&&(n(0,"div",39)(1,"div",40),o(2),i(),n(3,"div",41)(4,"div",42),o(5),i(),n(6,"div",43),_(7,y,2,1,"span",44)(8,D,2,1,"span",44),i()(),n(9,"div",45),o(10),i()()),u&2){let t=e.$implicit,c=e.index,r=s(3);a(2),p(c+1),a(3),p(t.productName||t.name||"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E0A\u0E37\u0E48\u0E2D"),a(2),l("ngIf",t.quantity),a(),l("ngIf",r.getItemUnitPrice(t)),a(2),f(" ",r.formatCurrency(r.getItemTotalCost(t))," ")}}function I(u,e){if(u&1&&(n(0,"div",37),_(1,w,11,5,"div",38),i()),u&2){let t=s(2);a(),l("ngForOf",t.stockLot.items)}}function T(u,e){if(u&1){let t=C();n(0,"div",46),d(1,"i",47),n(2,"p"),o(3,"\u0E22\u0E31\u0E07\u0E44\u0E21\u0E48\u0E21\u0E35\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E43\u0E19 Stock Lot \u0E19\u0E35\u0E49"),i(),n(4,"div",48)(5,"button",49),g("click",function(){E(t);let r=s(2);return m(r.addChinaStock())}),d(6,"i",22),o(7," \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E08\u0E32\u0E01\u0E08\u0E35\u0E19 "),i(),n(8,"button",50),g("click",function(){E(t);let r=s(2);return m(r.addThaiStock())}),d(9,"i",24),o(10," \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E08\u0E32\u0E01\u0E44\u0E17\u0E22 "),i()()()}}function q(u,e){if(u&1&&(n(0,"div",51)(1,"div",52)(2,"span",11),o(3,"\u0E08\u0E33\u0E19\u0E27\u0E19\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14:"),i(),n(4,"span",12),o(5),i()(),n(6,"div",53)(7,"span",11),o(8,"\u0E22\u0E2D\u0E14\u0E23\u0E27\u0E21\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14:"),i(),n(9,"span",12),o(10),i()()()),u&2){let t=s(2);a(5),f("",t.stockLot.items.length," \u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"),a(5),p(t.formatCurrency(t.totalCost))}}function $(u,e){u&1&&(n(0,"div",54),d(1,"i",55),n(2,"div")(3,"strong"),o(4,"\u0E27\u0E34\u0E18\u0E35\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19:"),i(),n(5,"ol")(6,"li"),o(7,"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E40\u0E02\u0E49\u0E32 Stock Lot "),n(8,"ul")(9,"li")(10,"strong"),o(11,"\u{1F1E8}\u{1F1F3} \u0E08\u0E32\u0E01\u0E08\u0E35\u0E19:"),i(),o(12,' \u0E04\u0E25\u0E34\u0E01 "\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E08\u0E32\u0E01\u0E08\u0E35\u0E19"'),i(),n(13,"li")(14,"strong"),o(15,"\u{1F1F9}\u{1F1ED} \u0E08\u0E32\u0E01\u0E44\u0E17\u0E22:"),i(),o(16,' \u0E04\u0E25\u0E34\u0E01 "\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E08\u0E32\u0E01\u0E44\u0E17\u0E22"'),i()()(),n(17,"li"),o(18,"\u0E15\u0E23\u0E27\u0E08\u0E2A\u0E2D\u0E1A\u0E22\u0E2D\u0E14\u0E23\u0E27\u0E21\u0E43\u0E2B\u0E49\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"),i(),n(19,"li"),o(20,'\u0E04\u0E25\u0E34\u0E01 "Complete & Create Transaction" \u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E2A\u0E23\u0E49\u0E32\u0E07 Transaction \u0E23\u0E32\u0E22\u0E08\u0E48\u0E32\u0E22\u0E2D\u0E31\u0E15\u0E42\u0E19\u0E21\u0E31\u0E15\u0E34'),i()()()())}function V(u,e){u&1&&(n(0,"div",56),d(1,"i",30),n(2,"span"),o(3,"Stock Lot \u0E19\u0E35\u0E49\u0E16\u0E39\u0E01 Complete \u0E41\u0E25\u0E49\u0E27 \u0E41\u0E25\u0E30\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E41\u0E01\u0E49\u0E44\u0E02\u0E44\u0E14\u0E49"),i()())}function A(u,e){if(u&1){let t=C();n(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"h1"),o(6),i(),n(7,"p"),o(8,"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14 Stock Lot"),i()(),n(9,"span",7),o(10),i()()(),n(11,"div",8)(12,"h3"),o(13,"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 Stock Lot"),i(),n(14,"div",9)(15,"div",10)(16,"span",11),o(17,"\u0E0A\u0E37\u0E48\u0E2D Lot:"),i(),n(18,"span",12),o(19),i()(),n(20,"div",10)(21,"span",11),o(22,"\u0E2A\u0E16\u0E32\u0E19\u0E30:"),i(),n(23,"span",12),o(24),i()(),n(25,"div",10)(26,"span",11),o(27,"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E19\u0E33\u0E40\u0E02\u0E49\u0E32:"),i(),n(28,"span",12),o(29),i()(),n(30,"div",10)(31,"span",11),o(32,"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E02\u0E2D\u0E07\u0E16\u0E36\u0E07:"),i(),n(33,"span",12),o(34),i()()()(),n(35,"div",13)(36,"div",14)(37,"h3"),o(38),i(),d(39,"div",15),i(),_(40,I,2,1,"div",16)(41,T,11,0,"div",17)(42,q,11,2,"div",18),i(),n(43,"div",19)(44,"h3"),o(45,"\u0E01\u0E32\u0E23\u0E14\u0E33\u0E40\u0E19\u0E34\u0E19\u0E01\u0E32\u0E23"),i(),n(46,"div",20)(47,"button",21),g("click",function(){E(t);let r=s();return m(r.addChinaStock())}),d(48,"i",22),o(49," \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E08\u0E32\u0E01\u0E08\u0E35\u0E19 "),i(),n(50,"button",23),g("click",function(){E(t);let r=s();return m(r.addThaiStock())}),d(51,"i",24),o(52," \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E08\u0E32\u0E01\u0E44\u0E17\u0E22 "),i(),n(53,"button",25),g("click",function(){E(t);let r=s();return m(r.editStockLot())}),d(54,"i",26),o(55," \u0E41\u0E01\u0E49\u0E44\u0E02 Stock Lot "),i(),n(56,"button",27),g("click",function(){E(t);let r=s();return m(r.updateStatus("ARRIVED"))}),d(57,"i",28),o(58," \u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E16\u0E36\u0E07\u0E41\u0E25\u0E49\u0E27 "),i(),n(59,"button",29),g("click",function(){E(t);let r=s();return m(r.completeStockLot())}),d(60,"i",30),o(61," Complete & Create Transaction "),i(),n(62,"button",31),g("click",function(){E(t);let r=s();return m(r.deleteStockLot())}),d(63,"i",32),o(64," \u0E25\u0E1A Stock Lot "),i(),n(65,"button",33),g("click",function(){E(t);let r=s();return m(r.goBack())}),d(66,"i",34),o(67," \u0E01\u0E25\u0E31\u0E1A "),i()(),_(68,$,21,0,"div",35)(69,V,4,0,"div",36),i()()()}if(u&2){let t=s();a(6),p(t.stockLot.lotName),a(3),l("ngClass",t.getStatusBadgeClass()),a(),f(" ",t.getStatusLabel()," "),a(9),p(t.stockLot.lotName),a(5),p(t.getStatusLabel()),a(5),p(t.formatDate(t.stockLot.importDate)),a(5),p(t.formatDate(t.stockLot.arrivalDate)),a(4),f("\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32 (",(t.stockLot.items==null?null:t.stockLot.items.length)||0," \u0E23\u0E32\u0E22\u0E01\u0E32\u0E23)"),a(2),l("ngIf",t.stockLot.items&&t.stockLot.items.length>0),a(),l("ngIf",!t.stockLot.items||t.stockLot.items.length===0),a(),l("ngIf",t.stockLot.items&&t.stockLot.items.length>0),a(5),l("disabled",t.stockLot.status==="COMPLETED"),a(3),l("disabled",t.stockLot.status==="COMPLETED"),a(3),l("disabled",t.stockLot.status==="COMPLETED"),a(3),l("disabled",t.stockLot.status==="COMPLETED"||t.stockLot.status==="ARRIVED"),a(3),l("disabled",t.stockLot.status==="COMPLETED"||!t.stockLot.items||t.stockLot.items.length===0),a(3),l("disabled",t.stockLot.status==="COMPLETED"),a(6),l("ngIf",t.stockLot.status!=="COMPLETED"),a(),l("ngIf",t.stockLot.status==="COMPLETED")}}function U(u,e){u&1&&(n(0,"div",57),d(1,"div",58),n(2,"p"),o(3,"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E42\u0E2B\u0E25\u0E14\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25..."),i()())}var O=class u{constructor(e,t,c){this.route=e;this.router=t;this.stockLotService=c}stockLot=null;stockLotId=null;loading=!0;totalCost=0;ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.stockLotId=Number(e),this.loadStockLot())}loadStockLot(){this.stockLotId&&(this.loading=!0,this.stockLotService.getStockLotById(this.stockLotId).subscribe({next:e=>{console.log("\u{1F4E6} Stock Lot Data:",e),this.stockLot=e,this.calculateTotalCost(),this.loading=!1},error:e=>{console.error("Error loading stock lot:",e),this.loading=!1,alert("\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E42\u0E2B\u0E25\u0E14\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 Stock Lot \u0E44\u0E14\u0E49")}}))}calculateTotalCost(){if(console.log("\u{1F9EE} Calculating total cost..."),!this.stockLot?.items||this.stockLot.items.length===0){console.log("\u274C No items found"),this.totalCost=0;return}console.log("\u{1F4CB} Items:",this.stockLot.items),this.totalCost=this.stockLot.items.reduce((e,t,c)=>{if(console.log(`Item ${c+1}:`,t),t.totalValue!==void 0&&t.totalValue!==null)return console.log(`  \u2705 totalValue: ${t.totalValue}`),e+Number(t.totalValue);if(t.totalBath!==void 0&&t.totalBath!==null)return console.log(`  \u2705 totalBath: ${t.totalBath}`),e+Number(t.totalBath);if(t.priceTotal!==void 0&&t.priceTotal!==null)return console.log(`  \u2705 priceTotal: ${t.priceTotal}`),e+Number(t.priceTotal);if(t.quantity&&t.finalPrice){let r=t.quantity*t.finalPrice;return console.log(`  \u2705 quantity \xD7 finalPrice: ${t.quantity} \xD7 ${t.finalPrice} = ${r}`),e+r}if(t.quantity&&t.costPerUnit){let r=t.quantity*t.costPerUnit;return console.log(`  \u2705 quantity \xD7 costPerUnit: ${t.quantity} \xD7 ${t.costPerUnit} = ${r}`),e+r}if(t.quantity&&t.pricePerUnit){let r=t.quantity*t.pricePerUnit;return console.log(`  \u2705 quantity \xD7 pricePerUnit: ${t.quantity} \xD7 ${t.pricePerUnit} = ${r}`),e+r}if(t.quantity&&t.finalPricePerPair){let r=t.quantity*t.finalPricePerPair;return console.log(`  \u2705 quantity \xD7 finalPricePerPair: ${t.quantity} \xD7 ${t.finalPricePerPair} = ${r}`),e+r}if(t.quantity&&t.pricePerUnitWithShipping){let r=t.quantity*t.pricePerUnitWithShipping;return console.log(`  \u2705 quantity \xD7 pricePerUnitWithShipping: ${t.quantity} \xD7 ${t.pricePerUnitWithShipping} = ${r}`),e+r}return console.log("  \u26A0\uFE0F Cannot calculate cost for this item"),e},0),console.log("\u{1F4B0} Total Cost:",this.totalCost)}completeStockLot(){if(!this.stockLotId||!this.stockLot)return;if(!this.stockLot.items||this.stockLot.items.length===0){alert(`\u274C \u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16 Complete \u0E44\u0E14\u0E49

\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E40\u0E02\u0E49\u0E32 Stock Lot \u0E01\u0E48\u0E2D\u0E19`);return}if(this.stockLot.status==="COMPLETED"){alert("\u274C Stock Lot \u0E19\u0E35\u0E49\u0E16\u0E39\u0E01 Complete \u0E44\u0E1B\u0E41\u0E25\u0E49\u0E27");return}if(this.totalCost<=0){alert(`\u274C \u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16 Complete \u0E44\u0E14\u0E49

\u0E22\u0E2D\u0E14\u0E23\u0E27\u0E21\u0E40\u0E1B\u0E47\u0E19 0 \u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07
\u0E01\u0E23\u0E38\u0E13\u0E32\u0E15\u0E23\u0E27\u0E08\u0E2A\u0E2D\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E43\u0E2B\u0E49\u0E21\u0E35\u0E23\u0E32\u0E04\u0E32\u0E04\u0E23\u0E1A\u0E16\u0E49\u0E27\u0E19`);return}confirm(`\u{1F3AF} Complete Stock Lot?

Lot: ${this.stockLot.lotName}
\u0E08\u0E33\u0E19\u0E27\u0E19\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32: ${this.stockLot.items.length} \u0E23\u0E32\u0E22\u0E01\u0E32\u0E23
\u0E22\u0E2D\u0E14\u0E23\u0E27\u0E21: ${this.formatCurrency(this.totalCost)}

\u2705 \u0E23\u0E30\u0E1A\u0E1A\u0E08\u0E30:
- \u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E40\u0E1B\u0E47\u0E19 COMPLETED
- \u0E2A\u0E23\u0E49\u0E32\u0E07 Transaction \u0E23\u0E32\u0E22\u0E08\u0E48\u0E32\u0E22\u0E2D\u0E31\u0E15\u0E42\u0E19\u0E21\u0E31\u0E15\u0E34

\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E14\u0E33\u0E40\u0E19\u0E34\u0E19\u0E01\u0E32\u0E23\u0E15\u0E48\u0E2D\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48?`)&&this.stockLotService.completeStockLot(this.stockLotId).subscribe({next:t=>{console.log("\u2705 Complete response:",t),alert(`\u2705 Complete Stock Lot \u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!

\u{1F4CA} \u0E2A\u0E23\u0E49\u0E32\u0E07 Transaction \u0E2D\u0E31\u0E15\u0E42\u0E19\u0E21\u0E31\u0E15\u0E34:
- \u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17: \u0E23\u0E32\u0E22\u0E08\u0E48\u0E32\u0E22
- \u0E2B\u0E21\u0E27\u0E14\u0E2B\u0E21\u0E39\u0E48: \u0E0B\u0E37\u0E49\u0E2D\u0E2A\u0E15\u0E47\u0E2D\u0E01
- \u0E08\u0E33\u0E19\u0E27\u0E19\u0E40\u0E07\u0E34\u0E19: ${this.formatCurrency(t.totalCost)}
- \u0E08\u0E33\u0E19\u0E27\u0E19\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32: ${t.itemsCount} \u0E23\u0E32\u0E22\u0E01\u0E32\u0E23

\u0E2A\u0E16\u0E32\u0E19\u0E30: COMPLETED \u2705`),this.loadStockLot()},error:t=>{console.error("\u274C Error completing stock lot:",t);let c=t.error?.message||"\u0E40\u0E01\u0E34\u0E14\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14\u0E43\u0E19\u0E01\u0E32\u0E23 Complete Stock Lot";alert(`\u274C \u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16 Complete \u0E44\u0E14\u0E49

${c}`)}})}editStockLot(){if(this.stockLot?.status==="COMPLETED"){alert("\u274C \u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E41\u0E01\u0E49\u0E44\u0E02 Stock Lot \u0E17\u0E35\u0E48 Complete \u0E41\u0E25\u0E49\u0E27");return}this.router.navigate(["/stock-lots/edit",this.stockLotId])}addChinaStock(){if(this.stockLot?.status==="COMPLETED"){alert("\u274C \u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E43\u0E19 Stock Lot \u0E17\u0E35\u0E48 Complete \u0E41\u0E25\u0E49\u0E27");return}this.router.navigate(["/china-stocks/add"],{queryParams:{stockLotId:this.stockLotId}})}addThaiStock(){if(this.stockLot?.status==="COMPLETED"){alert("\u274C \u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E43\u0E19 Stock Lot \u0E17\u0E35\u0E48 Complete \u0E41\u0E25\u0E49\u0E27");return}this.router.navigate(["/thai-stocks/add"],{queryParams:{stockLotId:this.stockLotId}})}updateStatus(e){if(this.stockLotId){if(this.stockLot?.status==="COMPLETED"){alert("\u274C \u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E02\u0E2D\u0E07 Stock Lot \u0E17\u0E35\u0E48 Complete \u0E41\u0E25\u0E49\u0E27");return}this.stockLotService.updateStockLotStatus(this.stockLotId,e).subscribe({next:()=>{alert(`\u2705 \u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E40\u0E1B\u0E47\u0E19 ${e} \u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08`),this.loadStockLot()},error:t=>{console.error("Error updating status:",t),alert("\u274C \u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E44\u0E14\u0E49")}})}}deleteStockLot(){if(!this.stockLotId||!this.stockLot)return;if(this.stockLot.status==="COMPLETED"){alert("\u274C \u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E25\u0E1A Stock Lot \u0E17\u0E35\u0E48 Complete \u0E41\u0E25\u0E49\u0E27");return}confirm(`\u26A0\uFE0F \u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E01\u0E32\u0E23\u0E25\u0E1A Stock Lot?

Lot: ${this.stockLot.lotName}
\u0E2A\u0E16\u0E32\u0E19\u0E30: ${this.stockLot.status}

\u0E01\u0E32\u0E23\u0E01\u0E23\u0E30\u0E17\u0E33\u0E19\u0E35\u0E49\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E22\u0E49\u0E2D\u0E19\u0E01\u0E25\u0E31\u0E1A\u0E44\u0E14\u0E49`)&&this.stockLotService.deleteStockLot(this.stockLotId).subscribe({next:()=>{alert("\u2705 \u0E25\u0E1A Stock Lot \u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08"),this.router.navigate(["/stock-lots"])},error:t=>{console.error("Error deleting stock lot:",t);let c=t.error?.message||"\u0E40\u0E01\u0E34\u0E14\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14";alert(`\u274C \u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E25\u0E1A\u0E44\u0E14\u0E49

${c}`)}})}goBack(){this.router.navigate(["/stock-lots"])}formatCurrency(e){return e?`\u0E3F${e.toLocaleString("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2})}`:"\u0E3F0.00"}formatDate(e){return e?new Date(e).toLocaleString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"\u0E44\u0E21\u0E48\u0E23\u0E30\u0E1A\u0E38"}getStatusBadgeClass(){switch(this.stockLot?.status){case"PENDING":return"badge-warning";case"ARRIVED":return"badge-info";case"COMPLETED":return"badge-success";case"CANCELLED":return"badge-danger";default:return"badge-secondary"}}getStatusLabel(){switch(this.stockLot?.status){case"PENDING":return"\u0E23\u0E2D\u0E14\u0E33\u0E40\u0E19\u0E34\u0E19\u0E01\u0E32\u0E23";case"ARRIVED":return"\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E16\u0E36\u0E07\u0E41\u0E25\u0E49\u0E27";case"COMPLETED":return"\u0E40\u0E2A\u0E23\u0E47\u0E08\u0E2A\u0E21\u0E1A\u0E39\u0E23\u0E13\u0E4C";case"CANCELLED":return"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01";default:return"\u0E44\u0E21\u0E48\u0E17\u0E23\u0E32\u0E1A\u0E2A\u0E16\u0E32\u0E19\u0E30"}}getItemTotalCost(e){return e.totalValue!==void 0&&e.totalValue!==null?Number(e.totalValue):e.totalBath!==void 0&&e.totalBath!==null?Number(e.totalBath):e.priceTotal!==void 0&&e.priceTotal!==null?Number(e.priceTotal):e.quantity&&e.finalPrice?e.quantity*e.finalPrice:e.quantity&&e.costPerUnit?e.quantity*e.costPerUnit:e.quantity&&e.pricePerUnit?e.quantity*e.pricePerUnit:e.quantity&&e.finalPricePerPair?e.quantity*e.finalPricePerPair:e.quantity&&e.pricePerUnitWithShipping?e.quantity*e.pricePerUnitWithShipping:0}getItemUnitPrice(e){return e.finalPrice!==void 0&&e.finalPrice!==null?Number(e.finalPrice):e.costPerUnit!==void 0&&e.costPerUnit!==null?Number(e.costPerUnit):e.pricePerUnit!==void 0&&e.pricePerUnit!==null?Number(e.pricePerUnit):e.finalPricePerPair!==void 0&&e.finalPricePerPair!==null?Number(e.finalPricePerPair):e.pricePerUnitWithShipping!==void 0&&e.pricePerUnitWithShipping!==null?Number(e.pricePerUnitWithShipping):0}static \u0275fac=function(t){return new(t||u)(b(v),b(S),b(M))};static \u0275cmp=k({type:u,selectors:[["app-stock-lot-detail"]],decls:2,vars:2,consts:[["class","main-container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"main-container"],[1,"container"],[1,"page-header"],[1,"header-content"],[1,"header-text"],[1,"status-badge",3,"ngClass"],[1,"info-card"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"items-card"],[1,"card-header"],[1,"add-items-buttons"],["class","items-list",4,"ngIf"],["class","no-items",4,"ngIf"],["class","summary-section",4,"ngIf"],[1,"actions-card"],[1,"actions-grid"],[1,"action-btn","china",3,"click","disabled"],[1,"bi","bi-geo-alt-fill"],[1,"action-btn","thai",3,"click","disabled"],[1,"bi","bi-house-fill"],[1,"action-btn","primary",3,"click","disabled"],[1,"bi","bi-pencil"],[1,"action-btn","info",3,"click","disabled"],[1,"bi","bi-truck"],[1,"action-btn","complete-btn",3,"click","disabled"],[1,"bi","bi-check-circle-fill"],[1,"action-btn","danger",3,"click","disabled"],[1,"bi","bi-trash"],[1,"action-btn","secondary",3,"click"],[1,"bi","bi-arrow-left"],["class","help-text",4,"ngIf"],["class","completed-notice",4,"ngIf"],[1,"items-list"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[1,"item-number"],[1,"item-details"],[1,"item-name"],[1,"item-info"],[4,"ngIf"],[1,"item-cost"],[1,"no-items"],[1,"bi","bi-inbox"],[1,"add-first-items-buttons"],[1,"add-first-item-btn","china",3,"click"],[1,"add-first-item-btn","thai",3,"click"],[1,"summary-section"],[1,"summary-row"],[1,"summary-row","total"],[1,"help-text"],[1,"bi","bi-info-circle"],[1,"completed-notice"],[1,"loading-container"],[1,"spinner"]],template:function(t,c){t&1&&_(0,A,70,19,"div",0)(1,U,4,0,"div",1),t&2&&(l("ngIf",!c.loading&&c.stockLot),a(),l("ngIf",c.loading))},dependencies:[L,x,h,P],styles:[".main-container[_ngcontent-%COMP%]{min-height:100vh;padding:2rem}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;margin-bottom:1.5rem;box-shadow:0 4px 6px #0000001a}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:2rem}.header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#2d3748;margin:0 0 .5rem}.header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;margin:0}.status-badge[_ngcontent-%COMP%]{padding:.5rem 1.5rem;border-radius:999px;font-weight:600;font-size:.875rem;white-space:nowrap}.badge-warning[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.badge-info[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.badge-success[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.badge-danger[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.info-card[_ngcontent-%COMP%], .items-card[_ngcontent-%COMP%], .actions-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;margin-bottom:1.5rem;box-shadow:0 4px 6px #0000001a}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .items-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .actions-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#2d3748;margin:0 0 1.5rem}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.875rem;color:#718096;font-weight:500}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1rem;color:#2d3748;font-weight:600}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.add-items-buttons[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.add-item-btn[_ngcontent-%COMP%]{border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:all .2s;color:#fff}.add-item-btn.china[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626)}.add-item-btn.china[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#dc2626,#b91c1c);transform:translateY(-2px);box-shadow:0 4px 12px #ef44444d}.add-item-btn.thai[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)}.add-item-btn.thai[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2563eb,#1d4ed8);transform:translateY(-2px);box-shadow:0 4px 12px #3b82f64d}.add-item-btn[_ngcontent-%COMP%]:disabled{background:#d1d5db;cursor:not-allowed;opacity:.5}.items-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:#f9fafb;border-radius:8px;border:1px solid #e5e7eb}.item-number[_ngcontent-%COMP%]{background:#667eea;color:#fff;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;flex-shrink:0}.item-details[_ngcontent-%COMP%]{flex:1}.item-name[_ngcontent-%COMP%]{font-weight:600;color:#2d3748;margin-bottom:.25rem}.item-info[_ngcontent-%COMP%]{display:flex;gap:1rem;font-size:.875rem;color:#718096}.item-cost[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;color:#667eea}.no-items[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;color:#9ca3af}.no-items[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.5}.no-items[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.125rem;margin-bottom:1.5rem}.add-first-items-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;flex-wrap:wrap}.add-first-item-btn[_ngcontent-%COMP%]{border:none;padding:.75rem 2rem;border-radius:8px;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:.5rem;transition:all .2s;color:#fff}.add-first-item-btn.china[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626)}.add-first-item-btn.china[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#dc2626,#b91c1c);transform:translateY(-2px);box-shadow:0 4px 12px #ef44444d}.add-first-item-btn.thai[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)}.add-first-item-btn.thai[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2563eb,#1d4ed8);transform:translateY(-2px);box-shadow:0 4px 12px #3b82f64d}.summary-section[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem;border-top:2px solid #e5e7eb}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.75rem 1rem;font-size:1rem}.summary-row.total[_ngcontent-%COMP%]{background:#f3f4f6;border-radius:8px;font-size:1.25rem;font-weight:700;color:#667eea;margin-top:.5rem}.actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.action-btn[_ngcontent-%COMP%]{padding:1rem 1.5rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:.5rem;transition:all .2s;color:#fff}.action-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.action-btn.primary[_ngcontent-%COMP%]{background:#3b82f6}.action-btn.china[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626)}.action-btn.thai[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)}.action-btn.complete-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);font-size:1.05rem;grid-column:span 2}.action-btn.info[_ngcontent-%COMP%]{background:#06b6d4}.action-btn.danger[_ngcontent-%COMP%]{background:#ef4444}.action-btn.secondary[_ngcontent-%COMP%]{background:#6b7280}.help-text[_ngcontent-%COMP%]{margin-top:2rem;padding:1.5rem;background:#eff6ff;border-radius:8px;border-left:4px solid #3b82f6;display:flex;gap:1rem}.help-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6;font-size:1.5rem;flex-shrink:0}.help-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1e40af;display:block;margin-bottom:.5rem}.help-text[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:1.5rem;color:#1e3a8a}.help-text[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem}.help-text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:.5rem 0 .5rem 1rem;padding:0;list-style:none}.help-text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.25rem}.completed-notice[_ngcontent-%COMP%]{margin-top:2rem;padding:1rem 1.5rem;background:#d1fae5;border-radius:8px;display:flex;align-items:center;gap:.75rem;color:#065f46;font-weight:600}.completed-notice[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.loading-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2)}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:1.125rem;margin-top:1rem}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.actions-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.action-btn.complete-btn[_ngcontent-%COMP%]{grid-column:span 1}.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.add-items-buttons[_ngcontent-%COMP%], .add-first-items-buttons[_ngcontent-%COMP%]{flex-direction:column;width:100%}.add-item-btn[_ngcontent-%COMP%], .add-first-item-btn[_ngcontent-%COMP%]{width:100%}}"]})};export{O as StockLotDetailComponent};
