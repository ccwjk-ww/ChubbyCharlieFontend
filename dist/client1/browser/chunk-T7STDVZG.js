import{a as W}from"./chunk-DHITJKZG.js";import{a as Y}from"./chunk-QSMWRQZS.js";import{b as L,c as p,d as A,e as q,h as N,i as z,j as U,m as R,n as V,o as j,p as B,q as G,s as D,u as Q}from"./chunk-OKAB5353.js";import{b as F,d as I}from"./chunk-ACYYDNGN.js";import"./chunk-ZATVBB7N.js";import{Bb as n,Cb as x,Db as s,Ha as r,La as g,Ra as M,Wa as m,ec as T,fc as E,gc as w,hb as l,ib as o,jb as t,jc as y,kb as d,rb as P,tb as O,zb as f}from"./chunk-45HGJHZR.js";function $(c,e){c&1&&(o(0,"div",36),n(1," Product name is required and must be at least 2 characters "),t())}function H(c,e){if(c&1&&(o(0,"option",37),n(1),t()),c&2){let a=e.$implicit;l("value",a.stockLotId),r(),x(a.lotName)}}function J(c,e){c&1&&(o(0,"div",36),n(1," Quantity is required and must be 0 or greater "),t())}function X(c,e){c&1&&(o(0,"div",36),n(1," Total price is required and must be 0 or greater "),t())}function Z(c,e){c&1&&(o(0,"div",36),n(1," Status is required "),t())}function tt(c,e){c&1&&d(0,"i",38)}function et(c,e){c&1&&d(0,"i",39)}function ot(c,e){if(c&1&&(o(0,"div",40)(1,"h3"),n(2,"Thai Stock Preview"),t(),o(3,"div",41)(4,"div",42)(5,"h4"),n(6),t(),o(7,"span",43),n(8),t()(),o(9,"div",44)(10,"div",45)(11,"span",46),n(12,"Quantity:"),t(),o(13,"span",47),n(14),t()(),o(15,"div",45)(16,"span",46),n(17,"Total Price:"),t(),o(18,"span",48),n(19),t()(),o(20,"div",45)(21,"span",46),n(22,"Shipping Cost:"),t(),o(23,"span",47),n(24),t()(),o(25,"div",45)(26,"span",46),n(27,"Total Cost:"),t(),o(28,"span",48),n(29),t()(),o(30,"div",45)(31,"span",46),n(32,"Price per Unit:"),t(),o(33,"span",47),n(34),t()(),o(35,"div",45)(36,"span",46),n(37,"Final Price per Unit:"),t(),o(38,"span",48),n(39),t()()()()()),c&2){let a=O();r(6),x(a.thaiStockForm.value.name||"Product Name"),r(),l("ngClass","status-"+(a.thaiStockForm.value.status||"ACTIVE").toLowerCase()),r(),s(" ",a.thaiStockForm.value.status||"ACTIVE"," "),r(6),s("",a.thaiStockForm.value.quantity||0," units"),r(5),s("\u0E3F",(a.thaiStockForm.value.priceTotal||0).toFixed(2)),r(5),s("\u0E3F",(a.thaiStockForm.value.shippingCost||0).toFixed(2)),r(5),s("\u0E3F",a.totalCost.toFixed(2)),r(5),s("\u0E3F",a.pricePerUnit.toFixed(2)),r(5),s("\u0E3F",a.pricePerUnitWithShipping.toFixed(2))}}var K=class c{constructor(e,a,i,u,h){this.fb=e;this.thaiStockService=a;this.stockLotService=i;this.router=u;this.route=h;this.thaiStockForm=this.fb.group({name:["",[p.required,p.minLength(2)]],shopURL:[""],quantity:["",[p.required,p.min(0)]],priceTotal:["",[p.required,p.min(0)]],shippingCost:[0,[p.min(0)]],status:["ACTIVE",p.required],stockLotId:[""]})}thaiStockForm;isEditMode=!1;stockItemId=null;stockLots=[];ngOnInit(){this.stockItemId=this.route.snapshot.paramMap.get("id")?Number(this.route.snapshot.paramMap.get("id")):null,this.isEditMode=!!this.stockItemId,this.loadStockLots(),this.isEditMode&&this.loadThaiStock()}loadStockLots(){this.stockLotService.getAllStockLots().subscribe({next:e=>{this.stockLots=e},error:e=>console.error("Error loading stock lots:",e)})}loadThaiStock(){this.stockItemId&&this.thaiStockService.getThaiStockById(this.stockItemId).subscribe({next:e=>{this.thaiStockForm.patchValue({name:e.name,shopURL:e.shopURL||"",quantity:e.quantity,priceTotal:e.priceTotal,shippingCost:e.shippingCost||0,status:e.status||"ACTIVE",stockLotId:e.stockLotId||""})},error:e=>console.error("Error loading Thai stock:",e)})}onSubmit(){if(this.thaiStockForm.valid){let e=this.thaiStockForm.value,a={name:e.name,shopURL:e.shopURL,quantity:e.quantity,priceTotal:e.priceTotal,shippingCost:e.shippingCost||0,status:e.status,stockLotId:e.stockLotId};this.isEditMode&&this.stockItemId?this.thaiStockService.updateThaiStock(this.stockItemId,a).subscribe({next:()=>{alert("Thai stock updated successfully!"),this.router.navigate(["/thai-stocks"])},error:i=>{console.error("Error updating Thai stock:",i),alert("Error updating Thai stock. Please try again.")}}):this.thaiStockService.createThaiStock(a).subscribe({next:()=>{alert("Thai stock added successfully!"),this.resetForm(),this.router.navigate(["/thai-stocks"])},error:i=>{console.error("Error adding Thai stock:",i),alert("Error adding Thai stock. Please try again.")}})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.thaiStockForm.controls).forEach(e=>{this.thaiStockForm.get(e)?.markAsTouched()})}resetForm(){this.thaiStockForm.reset(),this.thaiStockForm.patchValue({status:"ACTIVE",shippingCost:0})}goBack(){this.router.navigate(["/thai-stocks"])}get totalCost(){let e=this.thaiStockForm.value.priceTotal||0,a=this.thaiStockForm.value.shippingCost||0;return e+a}get pricePerUnit(){let e=this.thaiStockForm.value.priceTotal||0,a=this.thaiStockForm.value.quantity||1;return a>0?e/a:0}get pricePerUnitWithShipping(){let e=this.totalCost,a=this.thaiStockForm.value.quantity||1;return a>0?e/a:0}static \u0275fac=function(a){return new(a||c)(g(D),g(W),g(Y),g(I),g(F))};static \u0275cmp=M({type:c,selectors:[["app-thai-stock-add"]],decls:72,vars:21,consts:[[1,"main-container"],[1,"container"],[1,"page-header"],[1,"thai-stock-form",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-fields"],[1,"field-row"],[1,"form-group"],["for","name"],[1,"required"],["id","name","formControlName","name","placeholder","Enter product name",1,"form-control"],["class","error-message",4,"ngIf"],["for","stockLotId"],["id","stockLotId","formControlName","stockLotId",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","quantity"],["id","quantity","formControlName","quantity","placeholder","Enter quantity","type","number","min","0","step","1",1,"form-control"],["for","priceTotal"],["id","priceTotal","formControlName","priceTotal","placeholder","Enter total price","type","number","min","0","step","0.01",1,"form-control"],["for","shippingCost"],["id","shippingCost","formControlName","shippingCost","placeholder","Enter shipping cost","type","number","min","0","step","0.01",1,"form-control"],["for","status"],["id","status","formControlName","status",1,"form-control"],["value","ACTIVE"],["value","INACTIVE"],["value","OUT_OF_STOCK"],["for","shopURL"],["id","shopURL","formControlName","shopURL","placeholder","Enter shop URL (optional)",1,"form-control"],[1,"form-actions"],["type","button",1,"back-btn",3,"click"],[1,"bi","bi-arrow-left"],["type","submit",1,"submit-btn",3,"disabled"],["class","bi bi-check-circle",4,"ngIf"],["class","bi bi-pencil-square",4,"ngIf"],["class","thai-stock-preview",4,"ngIf"],[1,"error-message"],[3,"value"],[1,"bi","bi-check-circle"],[1,"bi","bi-pencil-square"],[1,"thai-stock-preview"],[1,"preview-card"],[1,"preview-header"],[1,"preview-status",3,"ngClass"],[1,"preview-details"],[1,"detail-item"],[1,"label"],[1,"value"],[1,"value","price"]],template:function(a,i){if(a&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),n(4),t(),o(5,"p"),n(6),t()(),o(7,"form",3),P("ngSubmit",function(){return i.onSubmit()}),o(8,"div",4)(9,"div",5)(10,"div",6)(11,"div",7)(12,"label",8),n(13,"Product Name "),o(14,"span",9),n(15,"*"),t()(),d(16,"input",10),m(17,$,2,0,"div",11),t(),o(18,"div",7)(19,"label",12),n(20,"Stock Lot"),t(),o(21,"select",13)(22,"option",14),n(23,"Select a stock lot (optional)"),t(),m(24,H,2,2,"option",15),t()()(),o(25,"div",6)(26,"div",7)(27,"label",16),n(28,"Quantity "),o(29,"span",9),n(30,"*"),t()(),d(31,"input",17),m(32,J,2,0,"div",11),t(),o(33,"div",7)(34,"label",18),n(35,"Total Price (\u0E3F) "),o(36,"span",9),n(37,"*"),t()(),d(38,"input",19),m(39,X,2,0,"div",11),t()(),o(40,"div",6)(41,"div",7)(42,"label",20),n(43,"Shipping Cost (\u0E3F)"),t(),d(44,"input",21),t(),o(45,"div",7)(46,"label",22),n(47,"Status "),o(48,"span",9),n(49,"*"),t()(),o(50,"select",23)(51,"option",24),n(52,"Active"),t(),o(53,"option",25),n(54,"Inactive"),t(),o(55,"option",26),n(56,"Out of Stock"),t()(),m(57,Z,2,0,"div",11),t()(),o(58,"div",6)(59,"div",7)(60,"label",27),n(61,"Shop URL"),t(),d(62,"input",28),t()()()(),o(63,"div",29)(64,"button",30),P("click",function(){return i.goBack()}),d(65,"i",31),n(66," Back "),t(),o(67,"button",32),m(68,tt,1,0,"i",33)(69,et,1,0,"i",34),n(70),t()()(),m(71,ot,40,9,"div",35),t()()),a&2){let u,h,k,v,b,S,C,_;r(4),x(i.isEditMode?"Edit Thai Stock":"New Thai Stock"),r(2),x(i.isEditMode?"Update Thai stock details":"Add a new product from Thailand"),r(),l("formGroup",i.thaiStockForm),r(9),f("error",((u=i.thaiStockForm.get("name"))==null?null:u.invalid)&&((u=i.thaiStockForm.get("name"))==null?null:u.touched)),r(),l("ngIf",((h=i.thaiStockForm.get("name"))==null?null:h.invalid)&&((h=i.thaiStockForm.get("name"))==null?null:h.touched)),r(7),l("ngForOf",i.stockLots),r(7),f("error",((k=i.thaiStockForm.get("quantity"))==null?null:k.invalid)&&((k=i.thaiStockForm.get("quantity"))==null?null:k.touched)),r(),l("ngIf",((v=i.thaiStockForm.get("quantity"))==null?null:v.invalid)&&((v=i.thaiStockForm.get("quantity"))==null?null:v.touched)),r(6),f("error",((b=i.thaiStockForm.get("priceTotal"))==null?null:b.invalid)&&((b=i.thaiStockForm.get("priceTotal"))==null?null:b.touched)),r(),l("ngIf",((S=i.thaiStockForm.get("priceTotal"))==null?null:S.invalid)&&((S=i.thaiStockForm.get("priceTotal"))==null?null:S.touched)),r(11),f("error",((C=i.thaiStockForm.get("status"))==null?null:C.invalid)&&((C=i.thaiStockForm.get("status"))==null?null:C.touched)),r(7),l("ngIf",((_=i.thaiStockForm.get("status"))==null?null:_.invalid)&&((_=i.thaiStockForm.get("status"))==null?null:_.touched)),r(10),l("disabled",i.thaiStockForm.invalid),r(),l("ngIf",!i.isEditMode),r(),l("ngIf",i.isEditMode),r(),s(" ",i.isEditMode?"Update Thai Stock":"Add Thai Stock"," "),r(),l("ngIf",i.thaiStockForm.value.name)}},dependencies:[Q,N,j,B,L,z,V,A,q,G,U,R,y,T,E,w],styles:[`.main-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;margin:1rem;padding:1.5rem;background-color:#fff;border-radius:1rem;box-shadow:0 2px 8px #0000000d;border:1px solid #e5e7eb;min-height:calc(100vh - 2rem);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;box-sizing:border-box}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;display:grid;grid-template-columns:2fr 1fr;gap:2rem}.page-header[_ngcontent-%COMP%]{margin-bottom:40px;grid-column:1 / -1}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin:0 0 5px;color:#212529}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;margin:0;font-size:16px}.thai-stock-form[_ngcontent-%COMP%], .china-stock-form[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:40px;box-shadow:0 2px 20px #00000014;border:1px solid #e9ecef}.form-row[_ngcontent-%COMP%]{display:block;margin-bottom:40px}.form-fields[_ngcontent-%COMP%]{flex:1}.field-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:25px}.form-group[_ngcontent-%COMP%]{flex:1;position:relative}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#212529;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #dee2e6;border-radius:8px;font-size:14px;transition:all .3s ease;background-color:#fff;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#16a34a;box-shadow:0 0 0 3px #16a34a1a;background-color:#fff}.china-stock-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#d97706;box-shadow:0 0 0 3px #d977061a}.form-control[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.form-control.error[_ngcontent-%COMP%]{border-color:#dc3545;background-color:#fff5f5}.form-control.error[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 3px #dc35451a}select.form-control[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");background-position:right 12px center;background-repeat:no-repeat;background-size:16px;appearance:none;padding-right:40px}.error-message[_ngcontent-%COMP%]{margin-top:5px;font-size:12px;color:#dc3545;font-weight:500}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;gap:20px;padding:20px 0;border-top:1px solid #e9ecef}.back-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#495057);border:none;color:#fff;padding:14px 32px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:140px;display:flex;align-items:center;gap:8px;justify-content:center;box-shadow:0 2px 8px #00000026}.back-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#495057,#343a40);transform:translateY(-2px);box-shadow:0 4px 12px #0003}.back-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #00000026}.back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.submit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#16a34a,#15803d);color:#fff;border:none;padding:14px 32px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:140px;display:flex;align-items:center;gap:8px;justify-content:center;box-shadow:0 2px 8px #16a34a33}.submit-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.china-stock-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d97706,#b45309);box-shadow:0 2px 8px #d9770633}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 15px #16a34a4d;background:linear-gradient(135deg,#15803d,#166534)}.china-stock-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 4px 15px #d977064d;background:linear-gradient(135deg,#b45309,#92400e)}.submit-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none;opacity:.6}.thai-stock-preview[_ngcontent-%COMP%], .china-stock-preview[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;box-shadow:0 2px 20px #00000014;border:1px solid #e9ecef;height:fit-content;position:sticky;top:20px}.thai-stock-preview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#212529;font-size:18px;font-weight:600;margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid #16a34a}.china-stock-preview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#212529;font-size:18px;font-weight:600;margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid #d97706}.preview-card[_ngcontent-%COMP%]{border:2px dashed #e9ecef;border-radius:8px;padding:20px;background:#f8fafc}.preview-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.preview-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#212529;font-size:16px;font-weight:600;margin:0}.preview-status[_ngcontent-%COMP%]{padding:.25rem .6rem;border-radius:12px;font-size:.75rem;font-weight:600;text-transform:uppercase}.preview-status.status-active[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46}.preview-status.status-inactive[_ngcontent-%COMP%]{background-color:#fee2e2;color:#dc2626}.preview-status.status-out_of_stock[_ngcontent-%COMP%]{background-color:#fef3c7;color:#d97706}.preview-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:#6c757d;font-size:14px}.detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#212529;font-size:14px}.detail-item[_ngcontent-%COMP%]   .value.price[_ngcontent-%COMP%]{color:#16a34a;font-weight:700;font-size:16px}.china-stock-preview[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .value.price[_ngcontent-%COMP%]{color:#d97706}@media (max-width: 1024px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem;padding:15px}.thai-stock-form[_ngcontent-%COMP%], .china-stock-form[_ngcontent-%COMP%]{padding:30px}.thai-stock-preview[_ngcontent-%COMP%], .china-stock-preview[_ngcontent-%COMP%]{position:static}}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:10px}.field-row[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.thai-stock-form[_ngcontent-%COMP%], .china-stock-form[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.submit-btn[_ngcontent-%COMP%], .back-btn[_ngcontent-%COMP%]{width:100%;padding:16px}}@media (max-width: 480px){.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.thai-stock-form[_ngcontent-%COMP%], .china-stock-form[_ngcontent-%COMP%]{padding:15px}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}.submit-btn[_ngcontent-%COMP%]:active{animation:_ngcontent-%COMP%_pulse .3s ease-in-out}`]})};export{K as ThaiStockAddComponent};
