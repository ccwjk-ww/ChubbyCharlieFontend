import{a as S}from"./chunk-TLNO4DHU.js";import{b as w,d as k}from"./chunk-ACYYDNGN.js";import"./chunk-ZATVBB7N.js";import{Ab as f,Bb as r,Cb as l,Db as m,Eb as v,Ha as o,La as b,Ra as M,Wa as s,Z as x,_ as P,fc as O,gc as h,hb as u,ib as n,jb as t,jc as A,kb as d,qb as y,rb as p,tb as g,yb as _,zb as C}from"./chunk-45HGJHZR.js";function B(a,i){a&1&&(n(0,"div",17),d(1,"div",18),n(2,"p"),r(3,"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E27\u0E34\u0E40\u0E04\u0E23\u0E32\u0E30\u0E2B\u0E4C\u0E15\u0E49\u0E19\u0E17\u0E38\u0E19..."),t()())}function D(a,i){if(a&1&&(n(0,"div",24)(1,"span",25),r(2,"\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22:"),t(),n(3,"span",26),r(4),t()()),a&2){let e=g(2);o(4),l(e.product.description)}}function T(a,i){if(a&1&&(n(0,"div",62)(1,"div",54)(2,"div",63),r(3),t()(),n(4,"div",55),r(5),t(),n(6,"div",56),r(7),t(),n(8,"div",57),r(9),t(),n(10,"div",58)(11,"div",64),d(12,"div",65),n(13,"span",66),r(14),t()()(),n(15,"div",59)(16,"small",67),r(17),t()()()),a&2){let e=i.$implicit,c=g(3);o(3),l(e.ingredientName),o(2),v(" ",e.requiredQuantity," ",e.unit," "),o(2),m(" ",c.formatCurrency(e.costPerUnit)," "),o(2),m(" ",c.formatCurrency(e.totalCost)," "),o(3),_("width",e.costPercentage,"%"),o(2),l(c.formatPercentage(e.costPercentage)),o(3),l(e.stockSource)}}function z(a,i){if(a&1&&(n(0,"div",51)(1,"div",21)(2,"h3"),r(3,"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14\u0E15\u0E49\u0E19\u0E17\u0E38\u0E19\u0E15\u0E32\u0E21\u0E2A\u0E48\u0E27\u0E19\u0E1B\u0E23\u0E30\u0E01\u0E2D\u0E1A"),t()(),n(4,"div",52)(5,"div",53)(6,"div",54),r(7,"\u0E2A\u0E48\u0E27\u0E19\u0E1B\u0E23\u0E30\u0E01\u0E2D\u0E1A"),t(),n(8,"div",55),r(9,"\u0E08\u0E33\u0E19\u0E27\u0E19"),t(),n(10,"div",56),r(11,"\u0E15\u0E49\u0E19\u0E17\u0E38\u0E19\u0E15\u0E48\u0E2D\u0E2B\u0E19\u0E48\u0E27\u0E22"),t(),n(12,"div",57),r(13,"\u0E15\u0E49\u0E19\u0E17\u0E38\u0E19\u0E23\u0E27\u0E21"),t(),n(14,"div",58),r(15,"\u0E40\u0E1B\u0E2D\u0E23\u0E4C\u0E40\u0E0B\u0E47\u0E19\u0E15\u0E4C"),t(),n(16,"div",59),r(17,"\u0E41\u0E2B\u0E25\u0E48\u0E07\u0E17\u0E35\u0E48\u0E21\u0E32"),t()(),n(18,"div",60),s(19,T,18,9,"div",61),t()()()),a&2){let e=g(2);o(19),u("ngForOf",e.costAnalysis.ingredientBreakdown)}}function F(a,i){if(a&1&&(n(0,"div",73),d(1,"div",74),n(2,"span",75),r(3),t()()),a&2){let e=i.$implicit,c=i.index,E=g(3);o(),_("background-color","hsl("+c*360/E.costAnalysis.ingredientBreakdown.length+", 70%, 50%)"),o(2),v("",e.ingredientName," (",E.formatPercentage(e.costPercentage),")")}}function N(a,i){if(a&1&&(n(0,"div",76)(1,"div",77),r(2),t(),n(3,"div",78),d(4,"div",79),n(5,"div",80),r(6),t()()()),a&2){let e=i.$implicit,c=i.index,E=g(3);o(2),l(e.ingredientName),o(2),_("width",e.costPercentage,"%")("background-color","hsl("+c*360/E.costAnalysis.ingredientBreakdown.length+", 70%, 50%)"),o(2),l(E.formatCurrency(e.totalCost))}}function j(a,i){if(a&1&&(n(0,"div",68)(1,"div",69),s(2,F,4,4,"div",70),t(),n(3,"div",71),s(4,N,7,6,"div",72),t()()),a&2){let e=g(2);o(2),u("ngForOf",e.costAnalysis.ingredientBreakdown),o(2),u("ngForOf",e.costAnalysis.ingredientBreakdown)}}function R(a,i){a&1&&d(0,"i",89)}function V(a,i){a&1&&d(0,"i",90)}function $(a,i){a&1&&d(0,"i",91)}function q(a,i){a&1&&(n(0,"div")(1,"strong"),r(2,"\u0E04\u0E27\u0E32\u0E21\u0E04\u0E38\u0E49\u0E21\u0E04\u0E48\u0E32\u0E14\u0E35\u0E40\u0E22\u0E35\u0E48\u0E22\u0E21:"),t(),r(3," \u0E2D\u0E31\u0E15\u0E23\u0E32\u0E01\u0E33\u0E44\u0E23\u0E2A\u0E39\u0E07\u0E01\u0E27\u0E48\u0E32 30% \u0E18\u0E38\u0E23\u0E01\u0E34\u0E08\u0E21\u0E35\u0E1C\u0E25\u0E01\u0E33\u0E44\u0E23\u0E17\u0E35\u0E48\u0E14\u0E35 "),t())}function U(a,i){a&1&&(n(0,"div")(1,"strong"),r(2,"\u0E04\u0E27\u0E32\u0E21\u0E04\u0E38\u0E49\u0E21\u0E04\u0E48\u0E32\u0E1B\u0E32\u0E19\u0E01\u0E25\u0E32\u0E07:"),t(),r(3," \u0E1E\u0E34\u0E08\u0E32\u0E23\u0E13\u0E32\u0E25\u0E14\u0E15\u0E49\u0E19\u0E17\u0E38\u0E19\u0E2B\u0E23\u0E37\u0E2D\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E23\u0E32\u0E04\u0E32\u0E02\u0E32\u0E22\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E01\u0E33\u0E44\u0E23 "),t())}function Y(a,i){a&1&&(n(0,"div")(1,"strong"),r(2,"\u0E04\u0E27\u0E32\u0E21\u0E04\u0E38\u0E49\u0E21\u0E04\u0E48\u0E32\u0E15\u0E48\u0E33:"),t(),r(3," \u0E04\u0E27\u0E23\u0E17\u0E1A\u0E17\u0E27\u0E19\u0E15\u0E49\u0E19\u0E17\u0E38\u0E19\u0E41\u0E25\u0E30\u0E23\u0E32\u0E04\u0E32\u0E02\u0E32\u0E22\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E08\u0E23\u0E34\u0E07\u0E08\u0E31\u0E07 "),t())}function H(a,i){if(a&1&&(n(0,"div",81)(1,"h4"),r(2,"\u0E04\u0E33\u0E41\u0E19\u0E30\u0E19\u0E33"),t(),n(3,"div",82)(4,"div",83),s(5,R,1,0,"i",84)(6,V,1,0,"i",85)(7,$,1,0,"i",86),n(8,"div",87),s(9,q,4,0,"div",88)(10,U,4,0,"div",88)(11,Y,4,0,"div",88),t()()()()),a&2){let e=g(2);o(4),C("success",e.costAnalysis.profitMarginPercentage>30)("warning",e.costAnalysis.profitMarginPercentage>10&&e.costAnalysis.profitMarginPercentage<=30)("danger",e.costAnalysis.profitMarginPercentage<=10),o(),u("ngIf",e.costAnalysis.profitMarginPercentage>30),o(),u("ngIf",e.costAnalysis.profitMarginPercentage>10&&e.costAnalysis.profitMarginPercentage<=30),o(),u("ngIf",e.costAnalysis.profitMarginPercentage<=10),o(2),u("ngIf",e.costAnalysis.profitMarginPercentage>30),o(),u("ngIf",e.costAnalysis.profitMarginPercentage>10&&e.costAnalysis.profitMarginPercentage<=30),o(),u("ngIf",e.costAnalysis.profitMarginPercentage<=10)}}function L(a,i){if(a&1&&(n(0,"div",19)(1,"div",20)(2,"div",21)(3,"h3"),r(4,"\u0E2A\u0E23\u0E38\u0E1B\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32"),t(),n(5,"span"),r(6),t()(),n(7,"div",22)(8,"div",23)(9,"div",24)(10,"span",25),r(11,"\u0E23\u0E2B\u0E31\u0E2A\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32:"),t(),n(12,"span",26),r(13),t()(),n(14,"div",24)(15,"span",25),r(16,"\u0E2B\u0E21\u0E27\u0E14\u0E2B\u0E21\u0E39\u0E48:"),t(),n(17,"span",26),r(18),t()(),s(19,D,5,1,"div",27),t()()(),n(20,"div",28)(21,"div",29)(22,"div",30)(23,"div",31),d(24,"i",13),t(),n(25,"div",32)(26,"div",33),r(27),t(),n(28,"div",34),r(29,"\u0E15\u0E49\u0E19\u0E17\u0E38\u0E19\u0E23\u0E27\u0E21"),t()()(),n(30,"div",35)(31,"div",31),d(32,"i",36),t(),n(33,"div",32)(34,"div",33),r(35),t(),n(36,"div",34),r(37,"\u0E23\u0E32\u0E04\u0E32\u0E02\u0E32\u0E22"),t()()(),n(38,"div",37)(39,"div",31),d(40,"i",38),t(),n(41,"div",32)(42,"div",33),r(43),t(),n(44,"div",34),r(45,"\u0E01\u0E33\u0E44\u0E23\u0E02\u0E31\u0E49\u0E19\u0E15\u0E49\u0E19"),t()()(),n(46,"div",39)(47,"div",31),d(48,"i",40),t(),n(49,"div",32)(50,"div",33),r(51),t(),n(52,"div",34),r(53,"\u0E40\u0E1B\u0E2D\u0E23\u0E4C\u0E40\u0E0B\u0E47\u0E19\u0E15\u0E4C\u0E01\u0E33\u0E44\u0E23"),t()()()()(),s(54,z,20,1,"div",41),n(55,"div",42)(56,"div",21)(57,"h3"),r(58,"\u0E41\u0E1C\u0E19\u0E20\u0E39\u0E21\u0E34\u0E2A\u0E31\u0E14\u0E2A\u0E48\u0E27\u0E19\u0E15\u0E49\u0E19\u0E17\u0E38\u0E19"),t()(),s(59,j,5,2,"div",43),t(),n(60,"div",44)(61,"div",21)(62,"h3"),r(63,"\u0E01\u0E32\u0E23\u0E27\u0E34\u0E40\u0E04\u0E23\u0E32\u0E30\u0E2B\u0E4C\u0E04\u0E27\u0E32\u0E21\u0E04\u0E38\u0E49\u0E21\u0E04\u0E48\u0E32"),t()(),n(64,"div",45)(65,"div",46)(66,"div",47)(67,"div",48),r(68,"\u0E2D\u0E31\u0E15\u0E23\u0E32\u0E01\u0E33\u0E44\u0E23\u0E02\u0E31\u0E49\u0E19\u0E15\u0E49\u0E19"),t(),n(69,"div",49),r(70),t()(),n(71,"div",47)(72,"div",48),r(73,"\u0E01\u0E33\u0E44\u0E23\u0E15\u0E48\u0E2D\u0E2B\u0E19\u0E48\u0E27\u0E22"),t(),n(74,"div",49),r(75),t()()(),s(76,H,12,12,"div",50),t()()()),a&2){let e=g();o(5),f(e.getStatusClass(e.product.status)),o(),m(" ",e.getStatusText(e.product.status)," "),o(7),l(e.product.sku),o(5),l(e.product.category||"-"),o(),u("ngIf",e.product.description),o(8),l(e.formatCurrency(e.costAnalysis.totalMaterialCost)),o(8),l(e.formatCurrency(e.costAnalysis.sellingPrice)),o(3),C("negative",(e.costAnalysis.grossProfit||0)<0),o(4),f(e.getProfitClass(e.costAnalysis.grossProfit)),o(),m(" ",e.formatCurrency(e.costAnalysis.grossProfit)," "),o(3),C("negative",(e.costAnalysis.profitMarginPercentage||0)<0),o(4),f(e.getMarginClass(e.costAnalysis.profitMarginPercentage)),o(),m(" ",e.formatPercentage(e.costAnalysis.profitMarginPercentage)," "),o(3),u("ngIf",e.costAnalysis.ingredientBreakdown&&e.costAnalysis.ingredientBreakdown.length>0),o(5),u("ngIf",e.costAnalysis.ingredientBreakdown&&e.costAnalysis.ingredientBreakdown.length>0),o(10),f(e.getMarginClass(e.costAnalysis.profitMarginPercentage)),o(),m(" ",e.formatPercentage(e.costAnalysis.profitMarginPercentage)," "),o(4),f(e.getProfitClass(e.costAnalysis.grossProfit)),o(),m(" ",e.formatCurrency(e.costAnalysis.grossProfit)," "),o(),u("ngIf",e.costAnalysis.profitMarginPercentage!==void 0)}}function Q(a,i){if(a&1){let e=y();n(0,"div",92),d(1,"i",90),n(2,"h3"),r(3,"\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E42\u0E2B\u0E25\u0E14\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E14\u0E49"),t(),n(4,"p"),r(5,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E25\u0E2D\u0E07\u0E43\u0E2B\u0E21\u0E48\u0E2D\u0E35\u0E01\u0E04\u0E23\u0E31\u0E49\u0E07 \u0E2B\u0E23\u0E37\u0E2D\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E14\u0E39\u0E41\u0E25\u0E23\u0E30\u0E1A\u0E1A"),t(),n(6,"button",93),p("click",function(){x(e);let E=g();return P(E.loadCostAnalysis())}),d(7,"i",94),r(8," \u0E25\u0E2D\u0E07\u0E43\u0E2B\u0E21\u0E48 "),t()()}}var I=class a{constructor(i,e,c){this.route=i;this.router=e;this.productService=c}productId=null;product=null;costAnalysis=null;loading=!1;ngOnInit(){this.productId=this.route.snapshot.paramMap.get("id")?Number(this.route.snapshot.paramMap.get("id")):null,this.productId&&(this.loadProductData(),this.loadCostAnalysis())}loadProductData(){this.productId&&this.productService.getProductById(this.productId).subscribe({next:i=>{this.product=i},error:i=>console.error("Error loading product:",i)})}loadCostAnalysis(){this.productId&&(this.loading=!0,this.productService.getProductCostAnalysis(this.productId).subscribe({next:i=>{this.costAnalysis=i,this.loading=!1},error:i=>{console.error("Error loading cost analysis:",i),this.loading=!1}}))}recalculateCost(){this.productId&&(this.loading=!0,this.productService.recalculateProductCost(this.productId).subscribe({next:()=>{this.loadProductData(),this.loadCostAnalysis()},error:i=>{console.error("Error recalculating cost:",i),this.loading=!1}}))}goBack(){this.router.navigate(["/products"])}editProduct(){this.router.navigate(["/products/edit",this.productId])}formatCurrency(i){return i==null?"\u0E3F0.00":`\u0E3F${i.toLocaleString("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2})}`}formatPercentage(i){return i==null?"0%":`${i.toFixed(1)}%`}getStatusClass(i){switch(i){case"ACTIVE":return"badge badge-green";case"INACTIVE":return"badge badge-red";case"DISCONTINUED":return"badge badge-orange";default:return"badge badge-gray"}}getStatusText(i){switch(i){case"ACTIVE":return"\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19";case"INACTIVE":return"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19";case"DISCONTINUED":return"\u0E2B\u0E22\u0E38\u0E14\u0E1C\u0E25\u0E34\u0E15";default:return"\u0E44\u0E21\u0E48\u0E23\u0E30\u0E1A\u0E38"}}getProfitClass(i){return!i||i===0?"":i>0?"text-success":"text-danger"}getMarginClass(i){return!i||i===0?"":i>0?"text-success":"text-danger"}getMaxCostPercentage(){return this.costAnalysis?.ingredientBreakdown?Math.max(...this.costAnalysis.ingredientBreakdown.map(i=>i.costPercentage||0)):0}static \u0275fac=function(e){return new(e||a)(b(w),b(k),b(S))};static \u0275cmp=M({type:a,selectors:[["app-product-cost-analysis"]],decls:23,vars:5,consts:[[1,"cost-analysis-container"],[1,"cost-analysis-header"],[1,"header-left"],[1,"analysis-icon"],[1,"bi-graph-up-arrow"],[1,"header-content"],[1,"subtitle"],[1,"header-actions"],[1,"back-btn",3,"click"],[1,"bi-arrow-left"],[1,"edit-btn",3,"click"],[1,"bi-pencil"],[1,"recalculate-btn",3,"click","disabled"],[1,"bi-calculator"],["class","loading-container",4,"ngIf"],["class","analysis-content",4,"ngIf"],["class","error-state",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"analysis-content"],[1,"summary-card"],[1,"card-header"],[1,"product-info"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],["class","info-item",4,"ngIf"],[1,"financial-summary"],[1,"summary-grid"],[1,"metric-card","cost"],[1,"metric-icon"],[1,"metric-content"],[1,"metric-value"],[1,"metric-label"],[1,"metric-card","price"],[1,"bi-tag"],[1,"metric-card","profit"],[1,"bi-currency-dollar"],[1,"metric-card","margin"],[1,"bi-percent"],["class","cost-breakdown-card",4,"ngIf"],[1,"chart-card"],["class","chart-container",4,"ngIf"],[1,"profitability-card"],[1,"profitability-content"],[1,"profit-metrics"],[1,"profit-item"],[1,"profit-label"],[1,"profit-value"],["class","recommendations",4,"ngIf"],[1,"cost-breakdown-card"],[1,"breakdown-table"],[1,"table-header"],[1,"col-ingredient"],[1,"col-quantity"],[1,"col-unit-cost"],[1,"col-total-cost"],[1,"col-percentage"],[1,"col-source"],[1,"table-body"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[1,"ingredient-name"],[1,"percentage-bar"],[1,"percentage-fill"],[1,"percentage-text"],[1,"source-text"],[1,"chart-container"],[1,"chart-legend"],["class","legend-item",4,"ngFor","ngForOf"],[1,"chart-bars"],["class","bar-item",4,"ngFor","ngForOf"],[1,"legend-item"],[1,"legend-color"],[1,"legend-text"],[1,"bar-item"],[1,"bar-label"],[1,"bar-container"],[1,"bar-fill"],[1,"bar-value"],[1,"recommendations"],[1,"recommendation-list"],[1,"recommendation-item"],["class","bi-lightbulb",4,"ngIf"],["class","bi-exclamation-triangle",4,"ngIf"],["class","bi-exclamation-circle",4,"ngIf"],[1,"recommendation-text"],[4,"ngIf"],[1,"bi-lightbulb"],[1,"bi-exclamation-triangle"],[1,"bi-exclamation-circle"],[1,"error-state"],[1,"retry-btn",3,"click"],[1,"bi-arrow-clockwise"]],template:function(e,c){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),d(4,"i",4),t(),n(5,"div",5)(6,"h1"),r(7,"\u0E01\u0E32\u0E23\u0E27\u0E34\u0E40\u0E04\u0E23\u0E32\u0E30\u0E2B\u0E4C\u0E15\u0E49\u0E19\u0E17\u0E38\u0E19\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32"),t(),n(8,"p",6),r(9),t()()(),n(10,"div",7)(11,"button",8),p("click",function(){return c.goBack()}),d(12,"i",9),r(13," \u0E01\u0E25\u0E31\u0E1A "),t(),n(14,"button",10),p("click",function(){return c.editProduct()}),d(15,"i",11),r(16," \u0E41\u0E01\u0E49\u0E44\u0E02\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32 "),t(),n(17,"button",12),p("click",function(){return c.recalculateCost()}),d(18,"i",13),r(19," \u0E04\u0E33\u0E19\u0E27\u0E13\u0E43\u0E2B\u0E21\u0E48 "),t()()(),s(20,B,4,0,"div",14)(21,L,77,27,"div",15)(22,Q,9,0,"div",16),t()),e&2&&(o(9),l((c.product==null?null:c.product.productName)||"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E42\u0E2B\u0E25\u0E14\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25..."),o(8),u("disabled",c.loading),o(3),u("ngIf",c.loading),o(),u("ngIf",!c.loading&&c.product&&c.costAnalysis),o(),u("ngIf",!c.loading&&(!c.product||!c.costAnalysis)))},dependencies:[A,O,h],styles:['.cost-analysis-container[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem;background-color:#f8fafc;border-radius:1rem;min-height:calc(100vh - 2rem);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.cost-analysis-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding:1.5rem;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000d}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.analysis-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:linear-gradient(135deg,#3b82f6,#1d4ed8);border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.5rem}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:700;color:#1f2937}.subtitle[_ngcontent-%COMP%]{margin:.5rem 0 0;color:#6b7280;font-size:1rem}.header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.back-btn[_ngcontent-%COMP%]{background:#6b7280;color:#fff;border:none;padding:.75rem 1.25rem;border-radius:.5rem;font-size:.9rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:all .2s ease}.back-btn[_ngcontent-%COMP%]:hover{background:#4b5563}.edit-btn[_ngcontent-%COMP%], .recalculate-btn[_ngcontent-%COMP%], .retry-btn[_ngcontent-%COMP%]{padding:.75rem 1.25rem;border:none;border-radius:.5rem;font-size:.9rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:all .2s ease}.edit-btn[_ngcontent-%COMP%]{background:#f59e0b;color:#fff}.edit-btn[_ngcontent-%COMP%]:hover{background:#d97706}.recalculate-btn[_ngcontent-%COMP%]{background:#059669;color:#fff}.recalculate-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#047857}.recalculate-btn[_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed}.retry-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.retry-btn[_ngcontent-%COMP%]:hover{background:#2563eb}.loading-container[_ngcontent-%COMP%]{padding:4rem;text-align:center;color:#6b7280}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e5e7eb;border-top:4px solid #3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.analysis-content[_ngcontent-%COMP%]{display:grid;gap:2rem}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 2px 8px #0000000d}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid #e5e7eb}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#1f2937}.badge[_ngcontent-%COMP%]{padding:.3rem .6rem;font-size:.8rem;border-radius:.5rem;font-weight:500;display:inline-block}.badge-green[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46}.badge-red[_ngcontent-%COMP%]{background-color:#fee2e2;color:#dc2626}.badge-orange[_ngcontent-%COMP%]{background-color:#fed7aa;color:#c2410c}.badge-gray[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151}.product-info[_ngcontent-%COMP%]{margin-top:1rem}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 0;border-bottom:1px solid #f3f4f6}.info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:#6b7280}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#1f2937}.financial-summary[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 2px 8px #0000000d}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem}.metric-card[_ngcontent-%COMP%]{padding:1.5rem;border-radius:12px;display:flex;align-items:center;gap:1rem;transition:transform .2s ease}.metric-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.metric-card.cost[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fee2e2,#fecaca);border:1px solid #fca5a5}.metric-card.price[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border:1px solid #93c5fd}.metric-card.profit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d1fae5,#a7f3d0);border:1px solid #6ee7b7}.metric-card.profit.negative[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fee2e2,#fecaca);border:1px solid #fca5a5}.metric-card.margin[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef3c7,#fde68a);border:1px solid #facc15}.metric-card.margin.negative[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fee2e2,#fecaca);border:1px solid #fca5a5}.metric-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.25rem;flex-shrink:0}.metric-card.cost[_ngcontent-%COMP%]   .metric-icon[_ngcontent-%COMP%]{background:#dc2626;color:#fff}.metric-card.price[_ngcontent-%COMP%]   .metric-icon[_ngcontent-%COMP%]{background:#2563eb;color:#fff}.metric-card.profit[_ngcontent-%COMP%]   .metric-icon[_ngcontent-%COMP%]{background:#059669;color:#fff}.metric-card.profit.negative[_ngcontent-%COMP%]   .metric-icon[_ngcontent-%COMP%]{background:#dc2626;color:#fff}.metric-card.margin[_ngcontent-%COMP%]   .metric-icon[_ngcontent-%COMP%]{background:#d97706;color:#fff}.metric-card.margin.negative[_ngcontent-%COMP%]   .metric-icon[_ngcontent-%COMP%]{background:#dc2626;color:#fff}.metric-content[_ngcontent-%COMP%]{flex:1}.metric-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1f2937;margin-bottom:.25rem}.metric-label[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;font-weight:500}.cost-breakdown-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 2px 8px #0000000d}.breakdown-table[_ngcontent-%COMP%]{overflow-x:auto}.table-header[_ngcontent-%COMP%], .table-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1fr 1.5fr 2fr;gap:1rem;padding:1rem;border-bottom:1px solid #e5e7eb;align-items:center}.table-header[_ngcontent-%COMP%]{background:#f9fafb;font-weight:600;color:#374151;border-radius:8px;margin-bottom:.5rem}.table-row[_ngcontent-%COMP%]:hover{background:#f9fafb}.ingredient-name[_ngcontent-%COMP%]{font-weight:600;color:#1f2937}.percentage-bar[_ngcontent-%COMP%]{position:relative;background:#e5e7eb;border-radius:4px;height:20px;overflow:hidden}.percentage-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#3b82f6,#1d4ed8);transition:width .3s ease;border-radius:4px}.percentage-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:.75rem;font-weight:600;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.5)}.source-text[_ngcontent-%COMP%]{color:#6b7280;font-size:.8rem}.chart-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 2px 8px #0000000d}.chart-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;gap:2rem}.chart-legend[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.legend-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:4px;flex-shrink:0}.legend-text[_ngcontent-%COMP%]{font-size:.9rem;color:#374151}.chart-bars[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.bar-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.bar-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#374151}.bar-container[_ngcontent-%COMP%]{position:relative;background:#e5e7eb;border-radius:4px;height:32px;overflow:hidden}.bar-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease;border-radius:4px}.bar-value[_ngcontent-%COMP%]{position:absolute;top:50%;right:8px;transform:translateY(-50%);font-size:.8rem;font-weight:600;color:#1f2937}.profitability-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 2px 8px #0000000d}.profitability-content[_ngcontent-%COMP%]{display:grid;gap:2rem}.profit-metrics[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem}.profit-item[_ngcontent-%COMP%]{text-align:center;padding:1.5rem;border:2px dashed #e5e7eb;border-radius:12px}.profit-label[_ngcontent-%COMP%]{font-size:.9rem;color:#6b7280;margin-bottom:.5rem}.profit-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1f2937}.recommendations[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.1rem;font-weight:600;color:#1f2937}.recommendation-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.recommendation-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;padding:1.5rem;border-radius:12px;border:1px solid #e5e7eb}.recommendation-item.success[_ngcontent-%COMP%]{background:#f0fdf4;border-color:#22c55e}.recommendation-item.warning[_ngcontent-%COMP%]{background:#fffbeb;border-color:#f59e0b}.recommendation-item.danger[_ngcontent-%COMP%]{background:#fef2f2;border-color:#ef4444}.recommendation-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;margin-top:.25rem}.recommendation-item.success[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#22c55e}.recommendation-item.warning[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f59e0b}.recommendation-item.danger[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ef4444}.recommendation-text[_ngcontent-%COMP%]{flex:1;font-size:.9rem;line-height:1.5;color:#374151}.text-success[_ngcontent-%COMP%]{color:#059669}.text-danger[_ngcontent-%COMP%]{color:#dc2626}.text-warning[_ngcontent-%COMP%]{color:#d97706}.error-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:#6b7280}.error-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#f87171;margin-bottom:1rem}.error-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#1f2937}.error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2rem}@media (max-width: 1024px){.chart-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}}@media (max-width: 768px){.cost-analysis-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem}.header-actions[_ngcontent-%COMP%]{justify-content:stretch;flex-wrap:wrap}.table-header[_ngcontent-%COMP%], .table-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem}.col-ingredient[_ngcontent-%COMP%], .col-quantity[_ngcontent-%COMP%], .col-unit-cost[_ngcontent-%COMP%], .col-total-cost[_ngcontent-%COMP%], .col-percentage[_ngcontent-%COMP%], .col-source[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0;border-bottom:1px solid #f3f4f6}.col-ingredient[_ngcontent-%COMP%]:before{content:"\\e2a\\e48\\e27\\e19\\e1b\\e23\\e30\\e01\\e2d\\e1a: ";font-weight:600}.col-quantity[_ngcontent-%COMP%]:before{content:"\\e08\\e33\\e19\\e27\\e19: ";font-weight:600}.col-unit-cost[_ngcontent-%COMP%]:before{content:"\\e15\\e49\\e19\\e17\\e38\\e19\\e15\\e48\\e2d\\e2b\\e19\\e48\\e27\\e22: ";font-weight:600}.col-total-cost[_ngcontent-%COMP%]:before{content:"\\e15\\e49\\e19\\e17\\e38\\e19\\e23\\e27\\e21: ";font-weight:600}.col-percentage[_ngcontent-%COMP%]:before{content:"\\e40\\e1b\\e2d\\e23\\e4c\\e40\\e0b\\e47\\e19\\e15\\e4c: ";font-weight:600}.col-source[_ngcontent-%COMP%]:before{content:"\\e41\\e2b\\e25\\e48\\e07\\e17\\e35\\e48\\e21\\e32: ";font-weight:600}.table-header[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.cost-analysis-container[_ngcontent-%COMP%]{margin:.5rem;padding:1rem}.summary-card[_ngcontent-%COMP%], .financial-summary[_ngcontent-%COMP%], .cost-breakdown-card[_ngcontent-%COMP%], .chart-card[_ngcontent-%COMP%], .profitability-card[_ngcontent-%COMP%]{padding:1.5rem}.metric-value[_ngcontent-%COMP%]{font-size:1.25rem}.profit-value[_ngcontent-%COMP%]{font-size:1.5rem}}']})};export{I as ProductCostAnalysisComponent};
