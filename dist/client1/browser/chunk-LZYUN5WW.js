import{a as F}from"./chunk-LD5BFJQC.js";import{b as I,d as T,g as D,n as z,o as N,p as V,t as A}from"./chunk-OKAB5353.js";import{d as E}from"./chunk-ACYYDNGN.js";import"./chunk-ZATVBB7N.js";import{Bb as r,Cb as C,Gb as M,Ha as s,Hb as O,Ib as v,La as h,Ra as w,Wa as b,Z as u,_ as p,fc as S,gc as y,hb as f,ib as t,jb as o,jc as k,kb as d,qb as P,rb as m,tb as g,yb as x,zb as _}from"./chunk-45HGJHZR.js";function W(c,n){c&1&&(t(0,"div",31),d(1,"div",32),t(2,"p"),r(3,"Loading customer data..."),o()())}function L(c,n){if(c&1){let e=P();t(0,"tr")(1,"td",35),r(2),o(),t(3,"td",36),r(4),o(),t(5,"td",37),r(6),o(),t(7,"td",38),r(8),o(),t(9,"td",39)(10,"div",42)(11,"button",43),m("click",function(a){let l=u(e).$implicit,R=g(2);return p(R.toggleDropdown(a,l))}),r(12," Actions "),d(13,"i",44),o(),t(14,"ul",45)(15,"li")(16,"button",46),m("click",function(){let a=u(e).$implicit,l=g(2);return p(l.editCustomer(a))}),r(17,"Edit"),o()(),t(18,"li")(19,"button",46),m("click",function(){let a=u(e).$implicit,l=g(2);return p(l.deleteCustomer(a))}),r(20,"Delete"),o()()()()()()}if(c&2){let e=n.$implicit,i=n.index,a=g(2);s(2),C(a.getRowNumber(i)),s(2),C(e.customerName),s(2),C(e.customerAddress),s(2),C(e.customerPhone),s(6),_("show",a.isDropdownOpen&&a.activeCustomer===e)}}function B(c,n){c&1&&(t(0,"tr")(1,"td",47),d(2,"i",4),t(3,"p"),r(4,"No customers found"),o()()())}function Y(c,n){if(c&1&&(t(0,"div",33)(1,"table",34)(2,"thead")(3,"tr")(4,"th",35),r(5,"S/N"),o(),t(6,"th",36),r(7,"Name"),o(),t(8,"th",37),r(9,"Address"),o(),t(10,"th",38),r(11,"Phone"),o(),t(12,"th",39),r(13,"Action"),o()()(),t(14,"tbody"),b(15,L,21,6,"tr",40)(16,B,5,0,"tr",41),o()()()),c&2){let e=g();s(15),f("ngForOf",e.paginatedCustomers),s(),f("ngIf",e.filteredCustomers.length===0&&!e.loading)}}function U(c,n){if(c&1){let e=P();t(0,"div",48)(1,"nav")(2,"ul",49)(3,"li",50)(4,"a",51),m("click",function(){u(e);let a=g();return p(a.goToPage(a.currentPage-1))}),d(5,"i",52),o()(),t(6,"li",50)(7,"a",51),m("click",function(){u(e);let a=g();return p(a.goToPage(a.currentPage+1))}),d(8,"i",53),o()()()()()}if(c&2){let e=g();s(3),_("disabled",e.currentPage===1),s(),x("cursor",e.currentPage===1?"not-allowed":"pointer"),s(2),_("disabled",e.currentPage===e.totalPages),s(),x("cursor",e.currentPage===e.totalPages?"not-allowed":"pointer")}}var j=class c{constructor(n,e){this.customerService=n;this.router=e}customers=[];filteredCustomers=[];paginatedCustomers=[];searchTerm="";currentPage=1;itemsPerPage=10;totalPages=1;loading=!1;isDropdownOpen=!1;activeCustomer=null;ngOnInit(){this.loadCustomers()}get totalCustomers(){return this.filteredCustomers.length}loadCustomers(){this.loading=!0,this.customerService.getAllCustomers().subscribe({next:n=>{this.customers=n,this.filteredCustomers=n,this.calculatePagination(),this.updatePaginatedData(),this.loading=!1},error:n=>{console.error("Error loading customers:",n),alert("\u0E40\u0E01\u0E34\u0E14\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14\u0E43\u0E19\u0E01\u0E32\u0E23\u0E42\u0E2B\u0E25\u0E14\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32"),this.loading=!1}})}onSearch(){this.currentPage=1,this.searchTerm.trim()?this.customerService.searchCustomersByNameOrPhone(this.searchTerm).subscribe({next:n=>{this.filteredCustomers=n,this.calculatePagination(),this.updatePaginatedData()},error:n=>{console.error("Error searching customers:",n),this.filteredCustomers=this.customers.filter(e=>e.customerName.toLowerCase().includes(this.searchTerm.toLowerCase())||e.customerPhone&&e.customerPhone.includes(this.searchTerm)),this.calculatePagination(),this.updatePaginatedData()}}):(this.filteredCustomers=this.customers,this.calculatePagination(),this.updatePaginatedData())}calculatePagination(){this.totalPages=Math.ceil(this.filteredCustomers.length/this.itemsPerPage),this.currentPage>this.totalPages&&this.totalPages>0&&(this.currentPage=this.totalPages),this.totalPages===0&&(this.currentPage=1)}updatePaginatedData(){let n=(this.currentPage-1)*this.itemsPerPage,e=n+this.itemsPerPage;this.paginatedCustomers=this.filteredCustomers.slice(n,e)}onItemsPerPageChange(){this.currentPage=1,this.calculatePagination(),this.updatePaginatedData()}goToPage(n){n>=1&&n<=this.totalPages&&n!==this.currentPage&&(this.currentPage=n,this.updatePaginatedData())}getRowNumber(n){return(this.currentPage-1)*this.itemsPerPage+n+1}openAddCustomerModal(){this.router.navigate(["/customers/add"])}editCustomer(n){this.router.navigate(["/customers/edit",n.customerId]),this.closeDropdown()}deleteCustomer(n){confirm(`\u0E04\u0E38\u0E13\u0E41\u0E19\u0E48\u0E43\u0E08\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48\u0E17\u0E35\u0E48\u0E08\u0E30\u0E25\u0E1A ${n.customerName}?`)&&this.customerService.deleteCustomer(n.customerId).subscribe({next:()=>{alert("\u0E25\u0E1A\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08"),this.loadCustomers(),this.closeDropdown()},error:e=>{console.error("Error deleting customer:",e),alert("\u0E40\u0E01\u0E34\u0E14\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14\u0E43\u0E19\u0E01\u0E32\u0E23\u0E25\u0E1A\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32")}})}toggleDropdown(n,e){n.stopPropagation(),this.activeCustomer===e?this.closeDropdown():(this.activeCustomer=e,this.isDropdownOpen=!0)}closeDropdown(){this.isDropdownOpen=!1,this.activeCustomer=null}onDocumentClick(){this.isDropdownOpen&&this.closeDropdown()}static \u0275fac=function(e){return new(e||c)(h(F),h(E))};static \u0275cmp=w({type:c,selectors:[["app-customer"]],decls:46,vars:6,consts:[[1,"customer-container",3,"click"],[1,"customer-header"],[1,"customer-header-top"],[1,"customer-icon"],[1,"bi-people"],[1,"customer-title"],[1,"customer-subtitle"],[1,"customer-controls"],[1,"customer-controls-left"],[1,"search-container"],[1,"bi-search","search-icon"],["type","text","placeholder","Enter search word or phone number",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"stats-card"],[1,"stats-number"],[1,"stats-label"],[1,"customer-controls-right"],[1,"add-customer-btn",3,"click"],[1,"bi-plus"],[1,"customer-table-container"],[1,"customer-table-header"],[1,"table-title"],[1,"table-controls"],[1,"per-page-selector"],[1,"per-page-select",3,"ngModelChange","change","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],["class","loading-container",4,"ngIf"],["class","table-wrapper",4,"ngIf"],["class","pagination-container",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"table-wrapper"],[1,"customer-table"],[1,"col-sn"],[1,"col-name"],[1,"col-address"],[1,"col-phone"],[1,"col-action"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"action-dropdown"],[1,"action-btn",3,"click"],[1,"bi","bi-chevron-down"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["colspan","5",1,"empty-state"],[1,"pagination-container"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click"],[1,"bi-chevron-left"],[1,"bi-chevron-right"]],template:function(e,i){e&1&&(t(0,"div",0),m("click",function(){return i.onDocumentClick()}),t(1,"div",1)(2,"div",2)(3,"div",3),d(4,"i",4),o(),t(5,"div",5)(6,"h1"),r(7,"All Customers"),o(),t(8,"p",6),r(9,"View, search for and add new customers"),o()()(),t(10,"div",7)(11,"div",8)(12,"div",9),d(13,"i",10),t(14,"input",11),v("ngModelChange",function(l){return O(i.searchTerm,l)||(i.searchTerm=l),l}),m("input",function(){return i.onSearch()}),o()(),t(15,"div",12)(16,"div",13),r(17),o(),t(18,"div",14),r(19,"Total number of customers"),o()()(),t(20,"div",15)(21,"button",16),m("click",function(){return i.openAddCustomerModal()}),d(22,"i",17),r(23," Add New Customer "),o()()()(),t(24,"div",18)(25,"div",19)(26,"h3",20),r(27,"All Customers"),o(),t(28,"div",21)(29,"div",22)(30,"span"),r(31,"Showing"),o(),t(32,"select",23),v("ngModelChange",function(l){return O(i.itemsPerPage,l)||(i.itemsPerPage=l),l}),m("change",function(){return i.onItemsPerPageChange()}),t(33,"option",24),r(34,"10"),o(),t(35,"option",25),r(36,"25"),o(),t(37,"option",26),r(38,"50"),o(),t(39,"option",27),r(40,"100"),o()(),t(41,"span"),r(42,"per page"),o()()()(),b(43,W,4,0,"div",28)(44,Y,17,2,"div",29)(45,U,9,8,"div",30),o()()),e&2&&(s(14),M("ngModel",i.searchTerm),s(3),C(i.totalCustomers),s(15),M("ngModel",i.itemsPerPage),s(11),f("ngIf",i.loading),s(),f("ngIf",!i.loading),s(),f("ngIf",!i.loading&&i.filteredCustomers.length>0))},dependencies:[k,S,y,A,N,V,I,z,T,D],styles:[".customer-container[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem;background-color:#fff;border-radius:1rem;box-shadow:0 2px 8px #0000000d;border:1px solid #e5e7eb;min-height:calc(100vh - 2rem);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;box-sizing:border-box}.customer-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #e5e7eb}.customer-header-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.customer-icon[_ngcontent-%COMP%]{width:40px;height:40px;background-color:#eff6ff;border-radius:10px;display:flex;align-items:center;justify-content:center;color:#3b82f6;font-size:1.25rem}.customer-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1f2937;font-size:1.5rem;font-weight:700;margin:0}.customer-subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:.9rem;margin:.5rem 0 0}.customer-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1.5rem;flex-wrap:wrap}.customer-controls-left[_ngcontent-%COMP%], .customer-controls-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1}.search-container[_ngcontent-%COMP%]{position:relative;flex:1;max-width:400px}.search-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 2.5rem;border:1px solid #d1d5db;border-radius:.5rem;font-size:.9rem;transition:all .2s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.search-icon[_ngcontent-%COMP%]{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:#9ca3af;font-size:1rem}.stats-card[_ngcontent-%COMP%]{background-color:#f8fafc;border:1px solid #e5e7eb;border-radius:.75rem;padding:1rem;text-align:center;min-width:120px}.stats-number[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1f2937}.stats-label[_ngcontent-%COMP%]{font-size:.85rem;color:#6b7280;margin-top:.25rem}.add-customer-btn[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff;border:none;padding:.75rem 1.25rem;border-radius:.5rem;font-size:.9rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:all .2s ease}.add-customer-btn[_ngcontent-%COMP%]:hover{background-color:#2563eb;box-shadow:0 4px 12px #3b82f633}.customer-table-container[_ngcontent-%COMP%]{margin-top:1rem;border-radius:.75rem;overflow:hidden}.customer-table-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid #f3f4f6;display:flex;justify-content:space-between;align-items:center}.table-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#1f2937;margin:0}.per-page-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.85rem;color:#6b7280}.per-page-select[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #d1d5db;border-radius:.5rem;font-size:.85rem}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.customer-table[_ngcontent-%COMP%]{width:100%;min-width:700px;border-collapse:collapse}.customer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .customer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #e5e7eb;font-size:.9rem}.customer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f9fafb;font-weight:600;color:#374151}.customer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.col-sn[_ngcontent-%COMP%]{width:10%;text-align:center}.col-name[_ngcontent-%COMP%], .col-address[_ngcontent-%COMP%]{width:30%}.col-phone[_ngcontent-%COMP%]{width:20%}.col-action[_ngcontent-%COMP%]{width:20%;min-width:120px;text-align:center}.action-dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.action-btn[_ngcontent-%COMP%]{background:#3b82f6;border:1px solid #d1d5db;padding:.4rem 1rem;border-radius:.4rem;font-size:.8rem;cursor:pointer;display:flex;align-items:center;gap:.25rem;color:#fff;transition:all .2s ease}.action-btn[_ngcontent-%COMP%]:hover{background-color:#f1f5f9;border-color:#3b82f6;color:#000}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background-color:#fff;border:1px solid #e5e7eb;border-radius:.4rem;box-shadow:0 2px 8px #0000000d;list-style:none;padding:.25rem 0;margin:.25rem 0 0;display:none;z-index:1000;min-width:100px}.dropdown-menu.show[_ngcontent-%COMP%]{display:block}.dropdown-item[_ngcontent-%COMP%]{padding:.4rem 1rem;font-size:.8rem;color:#374151;cursor:pointer;width:100%;text-align:left;border:none;background:none;transition:all .2s ease}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f1f5f9;color:#3b82f6}.pagination-container[_ngcontent-%COMP%]{padding:1.5rem;display:flex;justify-content:center}.pagination[_ngcontent-%COMP%]{display:flex;gap:.5rem;list-style:none;padding:0;margin:0}.page-item[_ngcontent-%COMP%]{display:flex}.page-link[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid #d1d5db;border-radius:.5rem;font-size:.9rem;color:#374151;cursor:pointer;transition:all .2s ease;text-decoration:none}.page-link[_ngcontent-%COMP%]:hover, .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff;border-color:#3b82f6}.page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#d1d5db;cursor:not-allowed}.loading-container[_ngcontent-%COMP%]{padding:3rem;text-align:center;color:#6b7280}.loading-spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:4px solid #e5e7eb;border-top:4px solid #3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{padding:3rem;text-align:center;color:#6b7280;font-size:1rem}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;color:#d1d5db}@media (max-width: 1024px){.customer-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.search-container[_ngcontent-%COMP%]{max-width:none}}@media (max-width: 768px){.customer-container[_ngcontent-%COMP%]{margin:.5rem;padding:1rem}.customer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .customer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;font-size:.85rem}.customer-table[_ngcontent-%COMP%]{min-width:600px}.col-action[_ngcontent-%COMP%]{min-width:100px}.action-btn[_ngcontent-%COMP%], .dropdown-item[_ngcontent-%COMP%]{padding:.3rem .8rem;font-size:.7rem}}@media (max-width: 640px){.customer-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.customer-controls-left[_ngcontent-%COMP%], .customer-controls-right[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.add-customer-btn[_ngcontent-%COMP%], .search-input[_ngcontent-%COMP%]{width:100%}.col-action[_ngcontent-%COMP%]{min-width:90px}.action-btn[_ngcontent-%COMP%], .dropdown-item[_ngcontent-%COMP%]{padding:.3rem .6rem;font-size:.7rem}}.customer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#a1a1aa;border-radius:4px}"]})};export{j as CustomerComponent};
