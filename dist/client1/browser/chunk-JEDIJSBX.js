import{a as z}from"./chunk-QSMWRQZS.js";import{d as T,g as D}from"./chunk-ACYYDNGN.js";import"./chunk-ZATVBB7N.js";import{Bb as o,Cb as d,Db as v,Ha as a,La as S,O as k,Ra as O,S as M,Wa as _,Z as g,_ as p,ec as P,fc as I,gc as w,hb as u,ib as t,jb as e,jc as L,kb as s,qb as y,qc as E,rb as b,tb as l}from"./chunk-45HGJHZR.js";var C=class r{constructor(i){this.http=i}apiUrl="https://www.chubbycharlieshop.com/api/summary";getStockLotSummary(i){return this.http.get(`${this.apiUrl}/lot/${i}`)}getSystemSummary(){return this.http.get(`${this.apiUrl}/system`)}static \u0275fac=function(n){return new(n||r)(M(E))};static \u0275prov=k({token:r,factory:r.\u0275fac,providedIn:"root"})};function A(r,i){r&1&&(t(0,"div",9),s(1,"div",10),t(2,"p"),o(3,"Loading dashboard data..."),e()())}function F(r,i){if(r&1&&(t(0,"div",49)(1,"div",50)(2,"div",51)(3,"span",52),o(4,"Import Date:"),e(),t(5,"span",53),o(6),e()(),t(7,"div",51)(8,"span",52),o(9,"Total Items:"),e(),t(10,"span",53),o(11),e()(),t(12,"div",51)(13,"span",52),o(14,"Total Value:"),e(),t(15,"span",53),o(16),e()()(),t(17,"div",54)(18,"div",55)(19,"span",56),o(20,"China Items:"),e(),t(21,"span",57),o(22),e()(),t(23,"div",58)(24,"span",56),o(25,"Thai Items:"),e(),t(26,"span",57),o(27),e()()()()),r&2){let n,c,m,x,h=l().$implicit,f=l(3);a(6),d(f.formatDate(h.importDate)),a(5),d(((n=f.getLotSummary(h.stockLotId))==null?null:n.totalItemCount)||0),a(5),d(f.formatCurrency((c=f.getLotSummary(h.stockLotId))==null?null:c.grandTotalValue)),a(6),d(((m=f.getLotSummary(h.stockLotId))==null?null:m.chinaItemCount)||0),a(5),d(((x=f.getLotSummary(h.stockLotId))==null?null:x.thaiItemCount)||0)}}function R(r,i){if(r&1){let n=y();t(0,"div",42),b("click",function(){let m=g(n).$implicit,x=l(3);return p(x.navigateToStockLot(m.stockLotId))}),t(1,"div",43)(2,"h3",44),o(3),e(),t(4,"span",45),o(5),e()(),_(6,F,28,5,"div",46),t(7,"div",47),s(8,"i",48),e()()}if(r&2){let n=i.$implicit,c=l(3);a(3),d(n.lotName),a(),u("ngClass",c.getStatusClass(n.status)),a(),v(" ",n.status," "),a(),u("ngIf",c.getLotSummary(n.stockLotId))}}function Y(r,i){if(r&1&&(t(0,"div",40),_(1,R,9,4,"div",41),e()),r&2){let n=l(2);a(),u("ngForOf",n.recentStockLots)}}function H(r,i){if(r&1){let n=y();t(0,"div",59),s(1,"i",4),t(2,"p"),o(3,"No stock lots found"),e(),t(4,"button",60),b("click",function(){g(n);let m=l(2);return p(m.navigateToStockLots())}),o(5," Create Your First Stock Lot "),e()()}}function $(r,i){if(r&1){let n=y();t(0,"div",11)(1,"div",12)(2,"h2",13),o(3,"Inventory Overview"),e(),t(4,"div",14)(5,"div",15)(6,"div",16),s(7,"i",17),e(),t(8,"div",18)(9,"div",19),o(10),e(),t(11,"div",20),o(12,"Total Stock Lots"),e()()(),t(13,"div",21)(14,"div",16),s(15,"i",22),e(),t(16,"div",18)(17,"div",19),o(18),e(),t(19,"div",20),o(20,"China Stock Items"),e(),t(21,"div",23),o(22),e()()(),t(23,"div",24)(24,"div",16),s(25,"i",25),e(),t(26,"div",18)(27,"div",19),o(28),e(),t(29,"div",20),o(30,"Thai Stock Items"),e(),t(31,"div",23),o(32),e()()(),t(33,"div",26)(34,"div",16),s(35,"i",27),e(),t(36,"div",18)(37,"div",19),o(38),e(),t(39,"div",20),o(40,"Active Items"),e(),t(41,"div",23),o(42),e()()()()(),t(43,"div",28)(44,"h2",13),o(45,"Quick Actions"),e(),t(46,"div",29)(47,"button",30),b("click",function(){g(n);let m=l();return p(m.navigateToStockLots())}),s(48,"i",31),t(49,"span"),o(50,"Manage Stock Lots"),e()(),t(51,"button",32),b("click",function(){g(n);let m=l();return p(m.navigateToChinaStocks())}),s(52,"i",22),t(53,"span"),o(54,"China Inventory"),e()(),t(55,"button",33),b("click",function(){g(n);let m=l();return p(m.navigateToThaiStocks())}),s(56,"i",25),t(57,"span"),o(58,"Thai Inventory"),e()()()(),t(59,"div",34)(60,"div",35)(61,"h2",13),o(62,"Recent Stock Lots"),e(),t(63,"button",36),b("click",function(){g(n);let m=l();return p(m.navigateToStockLots())}),o(64," View All "),s(65,"i",37),e()(),_(66,Y,2,1,"div",38)(67,H,6,0,"div",39),e()()}if(r&2){let n=l();a(10),d((n.systemSummary==null?null:n.systemSummary.totalLots)||0),a(8),d((n.systemSummary==null?null:n.systemSummary.totalChinaItems)||0),a(4),v("",n.getChinaPercentage(),"% of total"),a(6),d((n.systemSummary==null?null:n.systemSummary.totalThaiItems)||0),a(4),v("",n.getThaiPercentage(),"% of total"),a(6),d((n.systemSummary==null?null:n.systemSummary.activeItems)||0),a(4),v("",n.getActivePercentage(),"% active"),a(24),u("ngIf",n.recentStockLots.length>0),a(),u("ngIf",n.recentStockLots.length===0)}}var V=class r{constructor(i,n,c){this.stockSummaryService=i;this.stockLotService=n;this.router=c}systemSummary=null;recentStockLots=[];lotSummaries=new Map;loading=!1;ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.loading=!0,this.stockSummaryService.getSystemSummary().subscribe({next:i=>{this.systemSummary=i},error:i=>console.error("Error loading system summary:",i)}),this.stockLotService.getAllStockLots().subscribe({next:i=>{this.recentStockLots=i.slice(0,5),this.recentStockLots.forEach(n=>{n.stockLotId&&this.stockSummaryService.getStockLotSummary(n.stockLotId).subscribe({next:c=>{this.lotSummaries.set(n.stockLotId,c)},error:c=>console.error("Error loading lot summary:",c)})}),this.loading=!1},error:i=>{console.error("Error loading stock lots:",i),this.loading=!1}})}navigateToStockLots(){this.router.navigate(["/stock-lots"])}navigateToChinaStocks(){this.router.navigate(["/china-stocks"])}navigateToThaiStocks(){this.router.navigate(["/thai-stocks"])}navigateToStockLot(i){this.router.navigate(["/stock-lots",i])}getLotSummary(i){return this.lotSummaries.get(i)||null}getStatusClass(i){switch(i){case"PENDING":return"status-pending";case"IN_TRANSIT":return"status-in-transit";case"ARRIVED":return"status-arrived";case"COMPLETED":return"status-completed";case"CANCELLED":return"status-cancelled";default:return"status-unknown"}}formatCurrency(i){return i?new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(i):"\u0E3F0.00"}formatDate(i){return i?new Date(i).toLocaleDateString("th-TH"):"N/A"}getChinaPercentage(){return!this.systemSummary||this.systemSummary.totalItems===0?0:Math.round(this.systemSummary.totalChinaItems/this.systemSummary.totalItems*100)}getThaiPercentage(){return!this.systemSummary||this.systemSummary.totalItems===0?0:Math.round(this.systemSummary.totalThaiItems/this.systemSummary.totalItems*100)}getActivePercentage(){return!this.systemSummary||this.systemSummary.totalItems===0?0:Math.round(this.systemSummary.activeItems/this.systemSummary.totalItems*100)}static \u0275fac=function(n){return new(n||r)(S(C),S(z),S(T))};static \u0275cmp=O({type:r,selectors:[["app-stock-dashboard"]],decls:12,vars:2,consts:[[1,"stock-dashboard-container"],[1,"dashboard-header"],[1,"header-content"],[1,"dashboard-icon"],[1,"bi-box-seam"],[1,"dashboard-title"],[1,"dashboard-subtitle"],["class","loading-container",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"dashboard-content"],[1,"summary-section"],[1,"section-title"],[1,"summary-grid"],[1,"summary-card","total"],[1,"card-icon"],[1,"bi-boxes"],[1,"card-content"],[1,"card-number"],[1,"card-label"],[1,"summary-card","china"],[1,"bi-geo-alt"],[1,"card-percentage"],[1,"summary-card","thai"],[1,"bi-house-fill"],[1,"summary-card","active"],[1,"bi-check-circle"],[1,"actions-section"],[1,"action-buttons"],[1,"action-btn","primary",3,"click"],[1,"bi-shop-window"],[1,"action-btn","china",3,"click"],[1,"action-btn","thai",3,"click"],[1,"recent-lots-section"],[1,"section-header"],[1,"view-all-btn",3,"click"],[1,"bi-arrow-right"],["class","lots-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"lots-grid"],["class","lot-card",3,"click",4,"ngFor","ngForOf"],[1,"lot-card",3,"click"],[1,"lot-header"],[1,"lot-name"],[1,"lot-status",3,"ngClass"],["class","lot-details",4,"ngIf"],[1,"lot-actions"],[1,"bi-chevron-right"],[1,"lot-details"],[1,"lot-info"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"lot-breakdown"],[1,"breakdown-item","china"],[1,"breakdown-label"],[1,"breakdown-value"],[1,"breakdown-item","thai"],[1,"empty-state"],[1,"create-lot-btn",3,"click"]],template:function(n,c){n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),s(4,"i",4),e(),t(5,"div",5)(6,"h1"),o(7,"Stock & Inventory Dashboard"),e(),t(8,"p",6),o(9,"Overview of your stock lots and inventory management"),e()()()(),_(10,A,4,0,"div",7)(11,$,68,9,"div",8),e()),n&2&&(a(10),u("ngIf",c.loading),a(),u("ngIf",!c.loading))},dependencies:[L,P,I,w,D],styles:[".stock-dashboard-container[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem;background-color:#fff;border-radius:1rem;box-shadow:0 2px 8px #0000000d;border:1px solid #e5e7eb;min-height:calc(100vh - 2rem);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.dashboard-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #e5e7eb;margin-bottom:2rem}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.dashboard-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:linear-gradient(135deg,#6366f1,#8b5cf6);border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.5rem}.dashboard-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1f2937;font-size:1.75rem;font-weight:700;margin:0}.dashboard-subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:1rem;margin:.5rem 0 0}.loading-container[_ngcontent-%COMP%]{padding:4rem;text-align:center;color:#6b7280}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e5e7eb;border-top:4px solid #6366f1;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.dashboard-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1f2937;margin:0 0 1rem}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.view-all-btn[_ngcontent-%COMP%]{background:none;border:1px solid #d1d5db;color:#6b7280;padding:.5rem 1rem;border-radius:.5rem;font-size:.875rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:.5rem}.view-all-btn[_ngcontent-%COMP%]:hover{background-color:#f9fafb;color:#374151;border-color:#9ca3af}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;border:1px solid #e5e7eb;box-shadow:0 1px 3px #0000001a;display:flex;align-items:center;gap:1rem;transition:all .2s ease}.summary-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.card-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:#fff}.summary-card.total[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8)}.summary-card.china[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.summary-card.thai[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.summary-card.active[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed)}.card-content[_ngcontent-%COMP%]{flex:1}.card-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1f2937;line-height:1}.card-label[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem;margin-top:.25rem}.card-percentage[_ngcontent-%COMP%]{color:#9ca3af;font-size:.75rem;margin-top:.25rem}.action-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.action-btn[_ngcontent-%COMP%]{background:#fff;border:2px solid #e5e7eb;padding:1.5rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;flex-direction:column;align-items:center;gap:.75rem;text-decoration:none}.action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.action-btn.primary[_ngcontent-%COMP%]{border-color:#3b82f6;color:#3b82f6}.action-btn.primary[_ngcontent-%COMP%]:hover{background:#3b82f6;color:#fff;transform:translateY(-2px);box-shadow:0 4px 12px #3b82f633}.action-btn.china[_ngcontent-%COMP%]{border-color:#f59e0b;color:#f59e0b}.action-btn.china[_ngcontent-%COMP%]:hover{background:#f59e0b;color:#fff;transform:translateY(-2px);box-shadow:0 4px 12px #f59e0b33}.action-btn.thai[_ngcontent-%COMP%]{border-color:#10b981;color:#10b981}.action-btn.thai[_ngcontent-%COMP%]:hover{background:#10b981;color:#fff;transform:translateY(-2px);box-shadow:0 4px 12px #10b98133}.lots-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}.lot-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:1.5rem;cursor:pointer;transition:all .2s ease;position:relative}.lot-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #0000001a;border-color:#6366f1}.lot-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.lot-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1f2937;margin:0}.lot-status[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:12px;font-size:.75rem;font-weight:600;text-transform:uppercase}.status-pending[_ngcontent-%COMP%]{background-color:#fef3c7;color:#d97706}.status-in-transit[_ngcontent-%COMP%]{background-color:#dbeafe;color:#2563eb}.status-arrived[_ngcontent-%COMP%], .status-completed[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46}.status-cancelled[_ngcontent-%COMP%]{background-color:#fee2e2;color:#dc2626}.status-unknown[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#6b7280}.lot-details[_ngcontent-%COMP%]{margin-bottom:1rem}.lot-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-bottom:1rem}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.info-label[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem}.info-value[_ngcontent-%COMP%]{color:#1f2937;font-weight:500;font-size:.875rem}.lot-breakdown[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;padding-top:1rem;border-top:1px solid #f3f4f6}.breakdown-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.breakdown-label[_ngcontent-%COMP%]{color:#6b7280;font-size:.75rem;text-transform:uppercase;font-weight:600}.breakdown-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700}.breakdown-item.china[_ngcontent-%COMP%]   .breakdown-value[_ngcontent-%COMP%]{color:#f59e0b}.breakdown-item.thai[_ngcontent-%COMP%]   .breakdown-value[_ngcontent-%COMP%]{color:#10b981}.lot-actions[_ngcontent-%COMP%]{position:absolute;top:1.5rem;right:1.5rem;color:#9ca3af;font-size:1.25rem;transition:all .2s ease}.lot-card[_ngcontent-%COMP%]:hover   .lot-actions[_ngcontent-%COMP%]{color:#6366f1}.empty-state[_ngcontent-%COMP%]{padding:4rem 2rem;text-align:center;color:#6b7280}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;color:#d1d5db}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.125rem;margin-bottom:1.5rem}.create-lot-btn[_ngcontent-%COMP%]{background:#6366f1;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:.5rem;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease}.create-lot-btn[_ngcontent-%COMP%]:hover{background:#4f46e5;transform:translateY(-2px);box-shadow:0 4px 12px #6366f133}@media (max-width: 1024px){.summary-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.action-buttons[_ngcontent-%COMP%], .lots-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.stock-dashboard-container[_ngcontent-%COMP%]{margin:.5rem;padding:1rem}.dashboard-header[_ngcontent-%COMP%]{padding:1rem}.dashboard-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem}.lot-breakdown[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{V as StockDashboardComponent};
