import{a as Y}from"./chunk-CKHC3D5W.js";import{b as V,d as F,g as W,n as B,o as R,p as j,u as H}from"./chunk-32P7OPYT.js";import{d as L}from"./chunk-ACYYDNGN.js";import"./chunk-ZATVBB7N.js";import{Ab as I,Bb as i,Cb as f,Db as T,Gb as h,Ha as r,Hb as b,Ib as P,La as M,Mb as y,Ob as E,Ra as k,Wa as v,Z as p,_ as u,a as C,b as S,fc as A,gc as D,hb as _,ib as e,ic as z,jb as n,jc as N,kb as m,qb as O,rb as c,tb as g,yb as w,zb as x}from"./chunk-45HGJHZR.js";function q(d,o){d&1&&(e(0,"div",46),m(1,"div",47),e(2,"p"),i(3,"Loading staff data..."),n()())}function G(d,o){if(d&1){let t=O();e(0,"tr")(1,"td",50),i(2),n(),e(3,"td",51),i(4),n(),e(5,"td",52),i(6),n(),e(7,"td",53),i(8),n(),e(9,"td",54),i(10),n(),e(11,"td",55),i(12),y(13,"currency"),y(14,"currency"),n(),e(15,"td",56),i(16),n(),e(17,"td",57),i(18),n(),e(19,"td",58)(20,"span"),i(21),n()(),e(22,"td",59)(23,"div",62)(24,"button",63),c("click",function(l){let s=p(t).$implicit,U=g(2);return u(U.toggleDropdown(l,s))}),i(25," Actions "),m(26,"i",64),n(),e(27,"ul",65)(28,"li")(29,"button",66),c("click",function(){let l=p(t).$implicit,s=g(2);return u(s.editStaff(l))}),i(30,"Edit"),n()(),e(31,"li")(32,"button",66),c("click",function(){let l=p(t).$implicit,s=g(2);return u(s.deleteStaff(l))}),i(33,"Delete"),n()()()()()()}if(d&2){let t=o.$implicit,a=o.index,l=g(2);r(2),f(l.getRowNumber(a)),r(2),f(t.empName),r(2),f(t.empAddress),r(2),f(t.empPhone),r(2),f(t.empType),r(2),T(" ",t.empType==="DAILY"?E(13,13,t.dailyWage,"THB"):E(14,16,t.monthlySalary,"THB")," "),r(4),f(t.role),r(2),f(t.email),r(2),I(l.getStatusClass(t.status)),r(),f(t.status||"N/A"),r(6),x("show",l.isDropdownOpen&&l.activeStaff===t)}}function J(d,o){d&1&&(e(0,"tr")(1,"td",67),m(2,"i",4),e(3,"p"),i(4,"No staff members found"),n()()())}function K(d,o){if(d&1&&(e(0,"div",48)(1,"table",49)(2,"thead")(3,"tr")(4,"th",50),i(5,"S/N"),n(),e(6,"th",51),i(7,"Name"),n(),e(8,"th",52),i(9,"Address"),n(),e(10,"th",53),i(11,"Phone"),n(),e(12,"th",54),i(13,"Type"),n(),e(14,"th",55),i(15,"Salary/Wage"),n(),e(16,"th",56),i(17,"Role"),n(),e(18,"th",57),i(19,"Email"),n(),e(20,"th",58),i(21,"Status"),n(),e(22,"th",59),i(23,"Action"),n()()(),e(24,"tbody"),v(25,G,34,19,"tr",60)(26,J,5,0,"tr",61),n()()()),d&2){let t=g();r(25),_("ngForOf",t.paginatedStaff),r(),_("ngIf",t.filteredStaff.length===0&&!t.loading)}}function X(d,o){if(d&1){let t=O();e(0,"div",68)(1,"nav")(2,"ul",69)(3,"li",70)(4,"a",71),c("click",function(){p(t);let l=g();return u(l.goToPage(l.currentPage-1))}),m(5,"i",72),n()(),e(6,"li",70)(7,"a",71),c("click",function(){p(t);let l=g();return u(l.goToPage(l.currentPage+1))}),m(8,"i",73),n()()()()()}if(d&2){let t=g();r(3),x("disabled",t.currentPage===1),r(),w("cursor",t.currentPage===1?"not-allowed":"pointer"),r(2),x("disabled",t.currentPage===t.totalPages),r(),w("cursor",t.currentPage===t.totalPages?"not-allowed":"pointer")}}var Q=class d{constructor(o,t){this.employeeService=o;this.router=t}filteredStaff=[];paginatedStaff=[];searchTerm="";selectedFilter="";currentPage=1;itemsPerPage=5;totalPages=1;loading=!1;selectedStatus="ALL";isDropdownOpen=!1;activeStaff=null;ngOnInit(){this.loadEmployees()}get totalStaff(){return this.filteredStaff.length}loadEmployees(){this.loading=!0,this.employeeService.getAllEmployees().subscribe({next:o=>{console.log("Loaded employees:",o),this.filteredStaff=o.map(t=>S(C({},t),{status:t.status||"N/A"})),this.calculatePagination(),this.updatePaginatedData(),this.loading=!1},error:o=>{console.error("Error loading employees:",o),this.loading=!1}})}onSearch(){this.currentPage=1,this.searchTerm.trim()?this.employeeService.searchEmployeesByName(this.searchTerm).subscribe({next:o=>{console.log("Search results:",o),this.filteredStaff=o.map(t=>S(C({},t),{status:t.status||"N/A"})),this.calculatePagination(),this.updatePaginatedData()},error:o=>console.error("Error searching employees:",o)}):this.loadEmployees()}onFilterChange(){this.currentPage=1,this.applyFilters()}applyFilters(){let o=[...this.filteredStaff];if(this.searchTerm.trim()){let t=this.searchTerm.toLowerCase().trim();o=o.filter(a=>a.empName.toLowerCase().includes(t)||a.empPhone.includes(t)||a.role.toLowerCase().includes(t))}this.selectedFilter&&(o=o.filter(t=>t.role.toLowerCase().includes(this.selectedFilter.toLowerCase()))),this.selectedStatus!=="ALL"&&(o=o.filter(t=>t.status===this.selectedStatus)),this.filteredStaff=o,this.calculatePagination(),this.updatePaginatedData()}calculatePagination(){this.totalPages=Math.ceil(this.filteredStaff.length/this.itemsPerPage),this.currentPage>this.totalPages&&this.totalPages>0&&(this.currentPage=this.totalPages)}updatePaginatedData(){let o=(this.currentPage-1)*this.itemsPerPage,t=o+this.itemsPerPage;this.paginatedStaff=this.filteredStaff.slice(o,t)}onItemsPerPageChange(){this.currentPage=1,this.calculatePagination(),this.updatePaginatedData()}goToPage(o){o>=1&&o<=this.totalPages&&o!==this.currentPage&&(this.currentPage=o,this.updatePaginatedData())}getRowNumber(o){return(this.currentPage-1)*this.itemsPerPage+o+1}viewStaffDetails(o){this.router.navigate(["/staff",o.empId])}openAddStaffModal(){this.router.navigate(["/staff/add"])}editStaff(o){this.router.navigate(["/staff/edit",o.empId]),this.closeDropdown()}deleteStaff(o){confirm(`Are you sure you want to delete ${o.empName}?`)&&this.employeeService.deleteEmployee(o.empId).subscribe({next:()=>{this.loadEmployees(),this.closeDropdown()},error:t=>console.error("Error deleting employee:",t)})}getStatusClass(o){switch(o){case"ACTIVE":return"badge badge-green";case"INACTIVE":return"badge badge-red";case"N/A":case null:case void 0:return"badge badge-gray";default:return"badge badge-gray"}}toggleDropdown(o,t){o.stopPropagation(),this.activeStaff===t?this.closeDropdown():(this.activeStaff=t,this.isDropdownOpen=!0)}closeDropdown(){this.isDropdownOpen=!1,this.activeStaff=null}static \u0275fac=function(t){return new(t||d)(M(Y),M(L))};static \u0275cmp=k({type:d,selectors:[["app-staff"]],decls:76,vars:8,consts:[[1,"staff-container"],[1,"staff-header"],[1,"staff-header-top"],[1,"staff-icon"],[1,"bi-people"],[1,"staff-title"],[1,"staff-subtitle"],[1,"staff-controls"],[1,"staff-controls-left"],[1,"search-container"],[1,"bi-search","search-icon"],["type","text","placeholder","Enter search word",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"stats-card"],[1,"stats-number"],[1,"stats-label"],[1,"staff-controls-right"],[1,"filter-section"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value",""],["value","Admin"],["value","Manager"],["value","Developer"],["value","Designer"],["value","HR"],["value","Analyst"],["value","Tester"],["value","Operations"],["value","Support"],["value","ALL"],["value","ACTIVE"],["value","INACTIVE"],[1,"add-staff-btn",3,"click"],[1,"bi-plus"],[1,"staff-table-container"],[1,"staff-table-header"],[1,"table-title"],[1,"table-controls"],[1,"per-page-selector"],[1,"per-page-select",3,"ngModelChange","change","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],["class","loading-container",4,"ngIf"],["class","table-wrapper",4,"ngIf"],["class","pagination-container",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"table-wrapper"],[1,"staff-table"],[1,"col-sn"],[1,"col-name"],[1,"col-address"],[1,"col-phone"],[1,"col-type"],[1,"col-salary"],[1,"col-role"],[1,"col-email"],[1,"col-status"],[1,"col-action"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"action-dropdown"],[1,"action-btn",3,"click"],[1,"bi","bi-chevron-down"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["colspan","10",1,"empty-state"],[1,"pagination-container"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click"],[1,"bi-chevron-left"],[1,"bi-chevron-right"]],template:function(t,a){t&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m(4,"i",4),n(),e(5,"div",5)(6,"h1"),i(7,"All Staff"),n(),e(8,"p",6),i(9,"View, search for and add new staff"),n()()(),e(10,"div",7)(11,"div",8)(12,"div",9),m(13,"i",10),e(14,"input",11),P("ngModelChange",function(s){return b(a.searchTerm,s)||(a.searchTerm=s),s}),c("input",function(){return a.onSearch()}),n()(),e(15,"div",12)(16,"div",13),i(17),n(),e(18,"div",14),i(19,"Total number of staff"),n()()(),e(20,"div",15)(21,"div",16)(22,"select",17),P("ngModelChange",function(s){return b(a.selectedFilter,s)||(a.selectedFilter=s),s}),c("change",function(){return a.onFilterChange()}),e(23,"option",18),i(24,"All roles"),n(),e(25,"option",19),i(26,"Admin"),n(),e(27,"option",20),i(28,"Manager"),n(),e(29,"option",21),i(30,"Developer"),n(),e(31,"option",22),i(32,"Designer"),n(),e(33,"option",23),i(34,"HR Officer"),n(),e(35,"option",24),i(36,"Business Analyst"),n(),e(37,"option",25),i(38,"QA Tester"),n(),e(39,"option",26),i(40,"Operations"),n(),e(41,"option",27),i(42,"Support"),n()()(),e(43,"div",16)(44,"select",17),P("ngModelChange",function(s){return b(a.selectedStatus,s)||(a.selectedStatus=s),s}),c("change",function(){return a.onFilterChange()}),e(45,"option",28),i(46,"All Statuses"),n(),e(47,"option",29),i(48,"Active"),n(),e(49,"option",30),i(50,"Inactive"),n()()(),e(51,"button",31),c("click",function(){return a.openAddStaffModal()}),m(52,"i",32),i(53," Add New Staff "),n()()()(),e(54,"div",33)(55,"div",34)(56,"h3",35),i(57,"All Staff"),n(),e(58,"div",36)(59,"div",37)(60,"span"),i(61,"Showing"),n(),e(62,"select",38),P("ngModelChange",function(s){return b(a.itemsPerPage,s)||(a.itemsPerPage=s),s}),c("change",function(){return a.onItemsPerPageChange()}),e(63,"option",39),i(64,"10"),n(),e(65,"option",40),i(66,"25"),n(),e(67,"option",41),i(68,"50"),n(),e(69,"option",42),i(70,"100"),n()(),e(71,"span"),i(72,"per page"),n()()()(),v(73,q,4,0,"div",43)(74,K,27,2,"div",44)(75,X,9,8,"div",45),n()()),t&2&&(r(14),h("ngModel",a.searchTerm),r(3),f(a.totalStaff),r(5),h("ngModel",a.selectedFilter),r(22),h("ngModel",a.selectedStatus),r(18),h("ngModel",a.itemsPerPage),r(11),_("ngIf",a.loading),r(),_("ngIf",!a.loading),r(),_("ngIf",!a.loading&&a.filteredStaff.length>0))},dependencies:[N,A,D,H,R,j,V,B,F,W,z],styles:[".staff-container[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem;background-color:#fff;border-radius:1rem;box-shadow:0 2px 8px #0000000d;border:1px solid #e5e7eb;min-height:calc(100vh - 2rem);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;box-sizing:border-box}.staff-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #e5e7eb}.staff-header-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.staff-icon[_ngcontent-%COMP%]{width:40px;height:40px;background-color:#eff6ff;border-radius:10px;display:flex;align-items:center;justify-content:center;color:#3b82f6;font-size:1.25rem}.staff-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1f2937;font-size:1.5rem;font-weight:700;margin:0}.staff-subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:.9rem;margin:.5rem 0 0}.staff-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1.5rem;flex-wrap:wrap}.staff-controls-left[_ngcontent-%COMP%], .staff-controls-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1}.search-container[_ngcontent-%COMP%]{position:relative;flex:1;max-width:400px}.search-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 2.5rem;border:1px solid #d1d5db;border-radius:.5rem;font-size:.9rem;transition:all .2s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.search-icon[_ngcontent-%COMP%]{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:#9ca3af;font-size:1rem}.stats-card[_ngcontent-%COMP%]{background-color:#f8fafc;border:1px solid #e5e7eb;border-radius:.75rem;padding:1rem;text-align:center;min-width:120px}.stats-number[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1f2937}.stats-label[_ngcontent-%COMP%]{font-size:.85rem;color:#6b7280;margin-top:.25rem}.filter-select[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #d1d5db;border-radius:.5rem;font-size:.9rem;background-color:#fff;min-width:150px}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.add-staff-btn[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff;border:none;padding:.75rem 1.25rem;border-radius:.5rem;font-size:.9rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:all .2s ease}.add-staff-btn[_ngcontent-%COMP%]:hover{background-color:#2563eb;box-shadow:0 4px 12px #3b82f633}.staff-table-container[_ngcontent-%COMP%]{margin-top:1rem;border-radius:.75rem;overflow:hidden}.staff-table-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid #f3f4f6;display:flex;justify-content:space-between;align-items:center}.table-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#1f2937;margin:0}.per-page-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.85rem;color:#6b7280}.per-page-select[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #d1d5db;border-radius:.5rem;font-size:.85rem}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.staff-table[_ngcontent-%COMP%]{width:100%;min-width:1000px;border-collapse:collapse}.staff-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .staff-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #e5e7eb;font-size:.9rem}.staff-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f9fafb;font-weight:600;color:#374151}.staff-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f5f9}.col-sn[_ngcontent-%COMP%]{width:5%;text-align:center}.col-name[_ngcontent-%COMP%], .col-address[_ngcontent-%COMP%]{width:15%}.col-phone[_ngcontent-%COMP%]{width:12%}.col-type[_ngcontent-%COMP%]{width:10%;text-align:center}.col-salary[_ngcontent-%COMP%], .col-role[_ngcontent-%COMP%]{width:12%}.col-email[_ngcontent-%COMP%]{width:14%}.col-action[_ngcontent-%COMP%]{width:17%;min-width:120px;text-align:center}.col-status[_ngcontent-%COMP%]{width:10%;text-align:center}.badge[_ngcontent-%COMP%]{padding:.3rem .6rem;font-size:.8rem;border-radius:.5rem;font-weight:500;display:inline-block}.action-dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.action-btn[_ngcontent-%COMP%]{background:#3b82f6;border:1px solid #d1d5db;padding:.4rem 1rem;border-radius:.4rem;font-size:.8rem;cursor:pointer;display:flex;align-items:center;gap:.25rem;color:#fff;transition:all .2s ease}.action-btn[_ngcontent-%COMP%]:hover{background-color:#f1f5f9;border-color:#3b82f6;color:#000}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background-color:#fff;border:1px solid #e5e7eb;border-radius:.4rem;box-shadow:0 2px 8px #0000000d;list-style:none;padding:.25rem 0;margin:.25rem 0 0;display:none;z-index:1000;min-width:100px}.dropdown-menu.show[_ngcontent-%COMP%]{display:block}.dropdown-item[_ngcontent-%COMP%]{padding:.4rem 1rem;font-size:.8rem;color:#374151;cursor:pointer;width:100%;text-align:left;border:none;background:none;transition:all .2s ease}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f1f5f9;color:#3b82f6}.pagination-container[_ngcontent-%COMP%]{padding:1.5rem;display:flex;justify-content:center}.pagination[_ngcontent-%COMP%]{display:flex;gap:.5rem;list-style:none;padding:0;margin:0}.page-item[_ngcontent-%COMP%]{display:flex}.page-link[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid #d1d5db;border-radius:.5rem;font-size:.9rem;color:#374151;cursor:pointer;transition:all .2s ease;text-decoration:none}.page-link[_ngcontent-%COMP%]:hover, .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff;border-color:#3b82f6}.page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#d1d5db;cursor:not-allowed}.loading-container[_ngcontent-%COMP%]{padding:3rem;text-align:center;color:#6b7280}.loading-spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:4px solid #e5e7eb;border-top:4px solid #3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{padding:3rem;text-align:center;color:#6b7280;font-size:1rem}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;color:#d1d5db}.badge[_ngcontent-%COMP%]{padding:.3rem .6rem;font-size:.8rem;border-radius:.5rem;font-weight:500}.badge-blue[_ngcontent-%COMP%]{background-color:#dbeafe;color:#1e40af}.badge-green[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46}.badge-orange[_ngcontent-%COMP%]{background-color:#fed7aa;color:#9a3412}.badge-purple[_ngcontent-%COMP%]{background-color:#e9d5ff;color:#7c3aed}.badge-red[_ngcontent-%COMP%]{background-color:#fee2e2;color:#dc2626}.badge-gray[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151}@media (max-width: 1024px){.staff-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.search-container[_ngcontent-%COMP%]{max-width:none}}@media (max-width: 768px){.staff-container[_ngcontent-%COMP%]{margin:.5rem;padding:1rem}.staff-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .staff-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;font-size:.85rem}.staff-table[_ngcontent-%COMP%]{min-width:800px}.col-action[_ngcontent-%COMP%]{min-width:100px}.action-btn[_ngcontent-%COMP%], .dropdown-item[_ngcontent-%COMP%]{padding:.3rem .8rem;font-size:.7rem}}@media (max-width: 640px){.staff-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.staff-controls-left[_ngcontent-%COMP%], .staff-controls-right[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.add-staff-btn[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%], .search-input[_ngcontent-%COMP%]{width:100%}.col-action[_ngcontent-%COMP%]{min-width:90px}.action-btn[_ngcontent-%COMP%], .dropdown-item[_ngcontent-%COMP%]{padding:.3rem .6rem;font-size:.7rem}}.staff-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#a1a1aa;border-radius:4px}"]})};export{Q as Staff};
