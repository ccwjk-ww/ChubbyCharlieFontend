import{a as K}from"./chunk-AIH2XJFZ.js";import{a as Q}from"./chunk-QSMWRQZS.js";import{b as L,c as d,d as Y,e as R,h as q,i as N,j as z,m as B,n as V,o as U,p as j,q as W,s as G,u as D}from"./chunk-OKAB5353.js";import{b as T,d as A}from"./chunk-ACYYDNGN.js";import"./chunk-ZATVBB7N.js";import{Bb as i,Cb as v,Db as p,Ha as r,La as h,Ra as O,Wa as m,ec as w,fc as y,gc as I,hb as l,ib as n,jb as e,jc as F,kb as s,rb as M,tb as E,zb as g}from"./chunk-45HGJHZR.js";function H(c,t){c&1&&(n(0,"div",42),i(1," Product name is required "),e())}function J(c,t){if(c&1&&(n(0,"option",43),i(1),e()),c&2){let a=t.$implicit;l("value",a.stockLotId),r(),v(a.lotName)}}function X(c,t){c&1&&(n(0,"div",42),i(1," Unit price is required and must be greater than 0 "),e())}function Z(c,t){c&1&&(n(0,"div",42),i(1," Quantity is required and must be 0 or greater "),e())}function tt(c,t){c&1&&(n(0,"div",42),i(1," Exchange rate is required and must be greater than 0 "),e())}function et(c,t){c&1&&s(0,"i",44)}function nt(c,t){c&1&&s(0,"i",45)}function it(c,t){if(c&1&&(n(0,"div",46)(1,"h3"),i(2,"China Stock Preview"),e(),n(3,"div",47)(4,"div",48)(5,"h4"),i(6),e(),n(7,"span",49),i(8),e()(),n(9,"div",50)(10,"div",51)(11,"span",52),i(12,"Quantity:"),e(),n(13,"span",53),i(14),e()(),n(15,"div",51)(16,"span",52),i(17,"Unit Price:"),e(),n(18,"span",53),i(19),e()(),n(20,"div",51)(21,"span",52),i(22,"Total Value (\xA5):"),e(),n(23,"span",53),i(24),e()(),n(25,"div",51)(26,"span",52),i(27,"Total (\xA5 + Shipping):"),e(),n(28,"span",53),i(29),e()(),n(30,"div",51)(31,"span",52),i(32,"Total (\u0E3F):"),e(),n(33,"span",54),i(34),e()(),n(35,"div",51)(36,"span",52),i(37,"Final Price/Unit:"),e(),n(38,"span",54),i(39),e()()()()()),c&2){let a=E();r(6),v(a.chinaStockForm.value.name||"Product Name"),r(),l("ngClass","status-"+(a.chinaStockForm.value.status||"ACTIVE").toLowerCase()),r(),p(" ",a.chinaStockForm.value.status||"ACTIVE"," "),r(6),p("",a.chinaStockForm.value.quantity||0," units"),r(5),p("\xA5",a.chinaStockForm.value.unitPriceYuan||0),r(5),p("\xA5",a.totalValueYuan),r(5),p("\xA5",a.totalYuan),r(5),p("\u0E3F",a.totalBath),r(5),p("\u0E3F",a.finalPricePerPair)}}var $=class c{constructor(t,a,o,u,f){this.fb=t;this.chinaStockService=a;this.stockLotService=o;this.router=u;this.route=f;this.chinaStockForm=this.fb.group({name:["",[d.required,d.minLength(2)]],shopURL:[""],unitPriceYuan:["",[d.required,d.min(0)]],quantity:["",[d.required,d.min(0)]],shippingWithinChinaYuan:[0,[d.min(0)]],exchangeRate:["",[d.required,d.min(.1)]],shippingChinaToThaiBath:[0,[d.min(0)]],avgShippingPerPair:[0,[d.min(0)]],status:["ACTIVE",d.required],stockLotId:[""]})}chinaStockForm;isEditMode=!1;stockItemId=null;stockLots=[];ngOnInit(){this.stockItemId=this.route.snapshot.paramMap.get("id")?Number(this.route.snapshot.paramMap.get("id")):null,this.isEditMode=!!this.stockItemId,this.loadStockLots(),this.isEditMode&&this.loadChinaStock()}loadStockLots(){this.stockLotService.getAllStockLots().subscribe({next:t=>{this.stockLots=t},error:t=>console.error("Error loading stock lots:",t)})}loadChinaStock(){this.stockItemId&&this.chinaStockService.getChinaStockById(this.stockItemId).subscribe({next:t=>{this.chinaStockForm.patchValue({name:t.name,shopURL:t.shopURL||"",unitPriceYuan:t.unitPriceYuan,quantity:t.quantity,shippingWithinChinaYuan:t.shippingWithinChinaYuan||0,exchangeRate:t.exchangeRate,shippingChinaToThaiBath:t.shippingChinaToThaiBath||0,avgShippingPerPair:t.avgShippingPerPair||0,status:t.status||"ACTIVE",stockLotId:t.stockLotId||""})},error:t=>console.error("Error loading China stock:",t)})}onSubmit(){if(this.chinaStockForm.valid){let t=this.chinaStockForm.value,a={name:t.name,shopURL:t.shopURL,unitPriceYuan:t.unitPriceYuan,quantity:t.quantity,shippingWithinChinaYuan:t.shippingWithinChinaYuan||0,exchangeRate:t.exchangeRate,shippingChinaToThaiBath:t.shippingChinaToThaiBath||0,avgShippingPerPair:t.avgShippingPerPair||0,status:t.status,stockLotId:t.stockLotId};this.isEditMode&&this.stockItemId?this.chinaStockService.updateChinaStock(this.stockItemId,a).subscribe({next:()=>{alert("China stock updated successfully!"),this.router.navigate(["/china-stocks"])},error:o=>{console.error("Error updating China stock:",o),alert("Error updating China stock. Please try again.")}}):this.chinaStockService.createChinaStock(a).subscribe({next:()=>{alert("China stock added successfully!"),this.resetForm(),this.router.navigate(["/china-stocks"])},error:o=>{console.error("Error adding China stock:",o),alert("Error adding China stock. Please try again.")}})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.chinaStockForm.controls).forEach(t=>{this.chinaStockForm.get(t)?.markAsTouched()})}resetForm(){this.chinaStockForm.reset(),this.chinaStockForm.patchValue({status:"ACTIVE",shippingWithinChinaYuan:0,shippingChinaToThaiBath:0,avgShippingPerPair:0})}goBack(){this.router.navigate(["/china-stocks"])}get totalValueYuan(){let t=this.chinaStockForm.value.unitPriceYuan||0,a=this.chinaStockForm.value.quantity||0;return t*a}get totalYuan(){let t=this.totalValueYuan,a=this.chinaStockForm.value.shippingWithinChinaYuan||0;return t+a}get totalBath(){let t=this.totalYuan,a=this.chinaStockForm.value.exchangeRate||0;return t*a}get finalPricePerPair(){let t=this.chinaStockForm.value.quantity||1,a=this.chinaStockForm.value.avgShippingPerPair||0;return this.totalBath/t+a}static \u0275fac=function(a){return new(a||c)(h(G),h(K),h(Q),h(A),h(T))};static \u0275cmp=O({type:c,selectors:[["app-china-stock-add"]],decls:87,vars:23,consts:[[1,"main-container"],[1,"container"],[1,"page-header"],[1,"china-stock-form",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-fields"],[1,"field-row"],[1,"form-group"],["for","name"],[1,"required"],["id","name","formControlName","name","placeholder","Enter product name",1,"form-control"],["class","error-message",4,"ngIf"],["for","stockLotId"],["id","stockLotId","formControlName","stockLotId",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","unitPriceYuan"],["id","unitPriceYuan","formControlName","unitPriceYuan","placeholder","Enter unit price in Yuan","type","number","min","0","step","0.01",1,"form-control"],["for","quantity"],["id","quantity","formControlName","quantity","placeholder","Enter quantity","type","number","min","0","step","1",1,"form-control"],["for","shippingWithinChinaYuan"],["id","shippingWithinChinaYuan","formControlName","shippingWithinChinaYuan","placeholder","Enter shipping cost in China","type","number","min","0","step","0.01",1,"form-control"],["for","exchangeRate"],["id","exchangeRate","formControlName","exchangeRate","placeholder","Enter exchange rate (e.g., 5.2)","type","number","min","0.1","step","0.01",1,"form-control"],["for","shippingChinaToThaiBath"],["id","shippingChinaToThaiBath","formControlName","shippingChinaToThaiBath","placeholder","Enter international shipping cost","type","number","min","0","step","0.01",1,"form-control"],["for","avgShippingPerPair"],["id","avgShippingPerPair","formControlName","avgShippingPerPair","placeholder","Enter average shipping per unit","type","number","min","0","step","0.01",1,"form-control"],["for","shopURL"],["id","shopURL","formControlName","shopURL","placeholder","Enter shop URL (optional)",1,"form-control"],["for","status"],["id","status","formControlName","status",1,"form-control"],["value","ACTIVE"],["value","INACTIVE"],["value","OUT_OF_STOCK"],[1,"form-actions"],["type","button",1,"back-btn",3,"click"],[1,"bi","bi-arrow-left"],["type","submit",1,"submit-btn",3,"disabled"],["class","bi bi-check-circle",4,"ngIf"],["class","bi bi-pencil-square",4,"ngIf"],["class","china-stock-preview",4,"ngIf"],[1,"error-message"],[3,"value"],[1,"bi","bi-check-circle"],[1,"bi","bi-pencil-square"],[1,"china-stock-preview"],[1,"preview-card"],[1,"preview-header"],[1,"preview-status",3,"ngClass"],[1,"preview-details"],[1,"detail-item"],[1,"label"],[1,"value"],[1,"value","price"]],template:function(a,o){if(a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),i(4),e(),n(5,"p"),i(6),e()(),n(7,"form",3),M("ngSubmit",function(){return o.onSubmit()}),n(8,"div",4)(9,"div",5)(10,"div",6)(11,"div",7)(12,"label",8),i(13,"Product Name "),n(14,"span",9),i(15,"*"),e()(),s(16,"input",10),m(17,H,2,0,"div",11),e(),n(18,"div",7)(19,"label",12),i(20,"Stock Lot"),e(),n(21,"select",13)(22,"option",14),i(23,"Select a stock lot (optional)"),e(),m(24,J,2,2,"option",15),e()()(),n(25,"div",6)(26,"div",7)(27,"label",16),i(28,"Unit Price (\xA5) "),n(29,"span",9),i(30,"*"),e()(),s(31,"input",17),m(32,X,2,0,"div",11),e(),n(33,"div",7)(34,"label",18),i(35,"Quantity "),n(36,"span",9),i(37,"*"),e()(),s(38,"input",19),m(39,Z,2,0,"div",11),e()(),n(40,"div",6)(41,"div",7)(42,"label",20),i(43,"Shipping within China (\xA5)"),e(),s(44,"input",21),e(),n(45,"div",7)(46,"label",22),i(47,"Exchange Rate (\xA5 to \u0E3F) "),n(48,"span",9),i(49,"*"),e()(),s(50,"input",23),m(51,tt,2,0,"div",11),e()(),n(52,"div",6)(53,"div",7)(54,"label",24),i(55,"Shipping China to Thailand (\u0E3F)"),e(),s(56,"input",25),e(),n(57,"div",7)(58,"label",26),i(59,"Average Shipping per Unit (\u0E3F)"),e(),s(60,"input",27),e()(),n(61,"div",6)(62,"div",7)(63,"label",28),i(64,"Shop URL"),e(),s(65,"input",29),e(),n(66,"div",7)(67,"label",30),i(68,"Status "),n(69,"span",9),i(70,"*"),e()(),n(71,"select",31)(72,"option",32),i(73,"Active"),e(),n(74,"option",33),i(75,"Inactive"),e(),n(76,"option",34),i(77,"Out of Stock"),e()()()()()(),n(78,"div",35)(79,"button",36),M("click",function(){return o.goBack()}),s(80,"i",37),i(81," Back "),e(),n(82,"button",38),m(83,et,1,0,"i",39)(84,nt,1,0,"i",40),i(85),e()()(),m(86,it,40,9,"div",41),e()()),a&2){let u,f,x,C,b,k,S,_,P;r(4),v(o.isEditMode?"Edit China Stock":"New China Stock"),r(2),v(o.isEditMode?"Update China stock details":"Add a new product from China"),r(),l("formGroup",o.chinaStockForm),r(9),g("error",((u=o.chinaStockForm.get("name"))==null?null:u.invalid)&&((u=o.chinaStockForm.get("name"))==null?null:u.touched)),r(),l("ngIf",((f=o.chinaStockForm.get("name"))==null?null:f.invalid)&&((f=o.chinaStockForm.get("name"))==null?null:f.touched)),r(7),l("ngForOf",o.stockLots),r(7),g("error",((x=o.chinaStockForm.get("unitPriceYuan"))==null?null:x.invalid)&&((x=o.chinaStockForm.get("unitPriceYuan"))==null?null:x.touched)),r(),l("ngIf",((C=o.chinaStockForm.get("unitPriceYuan"))==null?null:C.invalid)&&((C=o.chinaStockForm.get("unitPriceYuan"))==null?null:C.touched)),r(6),g("error",((b=o.chinaStockForm.get("quantity"))==null?null:b.invalid)&&((b=o.chinaStockForm.get("quantity"))==null?null:b.touched)),r(),l("ngIf",((k=o.chinaStockForm.get("quantity"))==null?null:k.invalid)&&((k=o.chinaStockForm.get("quantity"))==null?null:k.touched)),r(11),g("error",((S=o.chinaStockForm.get("exchangeRate"))==null?null:S.invalid)&&((S=o.chinaStockForm.get("exchangeRate"))==null?null:S.touched)),r(),l("ngIf",((_=o.chinaStockForm.get("exchangeRate"))==null?null:_.invalid)&&((_=o.chinaStockForm.get("exchangeRate"))==null?null:_.touched)),r(20),g("error",((P=o.chinaStockForm.get("status"))==null?null:P.invalid)&&((P=o.chinaStockForm.get("status"))==null?null:P.touched)),r(11),l("disabled",o.chinaStockForm.invalid),r(),l("ngIf",!o.isEditMode),r(),l("ngIf",o.isEditMode),r(),p(" ",o.isEditMode?"Update China Stock":"Add China Stock"," "),r(),l("ngIf",o.chinaStockForm.value.name)}},dependencies:[D,q,U,j,L,N,V,Y,R,W,z,B,F,w,y,I],styles:[`.main-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;margin:1rem;padding:1.5rem;background-color:#fff;border-radius:1rem;box-shadow:0 2px 8px #0000000d;border:1px solid #e5e7eb;min-height:calc(100vh - 2rem);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;box-sizing:border-box}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;display:grid;grid-template-columns:2fr 1fr;gap:2rem}.page-header[_ngcontent-%COMP%]{margin-bottom:40px;grid-column:1 / -1}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin:0 0 5px;color:#212529}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;margin:0;font-size:16px}.thai-stock-form[_ngcontent-%COMP%], .china-stock-form[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:40px;box-shadow:0 2px 20px #00000014;border:1px solid #e9ecef}.form-row[_ngcontent-%COMP%]{display:block;margin-bottom:40px}.form-fields[_ngcontent-%COMP%]{flex:1}.field-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:25px}.form-group[_ngcontent-%COMP%]{flex:1;position:relative}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#212529;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #dee2e6;border-radius:8px;font-size:14px;transition:all .3s ease;background-color:#fff;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#16a34a;box-shadow:0 0 0 3px #16a34a1a;background-color:#fff}.china-stock-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#d97706;box-shadow:0 0 0 3px #d977061a}.form-control[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.form-control.error[_ngcontent-%COMP%]{border-color:#dc3545;background-color:#fff5f5}.form-control.error[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 3px #dc35451a}select.form-control[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");background-position:right 12px center;background-repeat:no-repeat;background-size:16px;appearance:none;padding-right:40px}.error-message[_ngcontent-%COMP%]{margin-top:5px;font-size:12px;color:#dc3545;font-weight:500}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;gap:20px;padding:20px 0;border-top:1px solid #e9ecef}.back-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#495057);border:none;color:#fff;padding:14px 32px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:140px;display:flex;align-items:center;gap:8px;justify-content:center;box-shadow:0 2px 8px #00000026}.back-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#495057,#343a40);transform:translateY(-2px);box-shadow:0 4px 12px #0003}.back-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #00000026}.back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.submit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#16a34a,#15803d);color:#fff;border:none;padding:14px 32px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:140px;display:flex;align-items:center;gap:8px;justify-content:center;box-shadow:0 2px 8px #16a34a33}.submit-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.china-stock-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d97706,#b45309);box-shadow:0 2px 8px #d9770633}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 15px #16a34a4d;background:linear-gradient(135deg,#15803d,#166534)}.china-stock-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 4px 15px #d977064d;background:linear-gradient(135deg,#b45309,#92400e)}.submit-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none;opacity:.6}.thai-stock-preview[_ngcontent-%COMP%], .china-stock-preview[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;box-shadow:0 2px 20px #00000014;border:1px solid #e9ecef;height:fit-content;position:sticky;top:20px}.thai-stock-preview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#212529;font-size:18px;font-weight:600;margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid #16a34a}.china-stock-preview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#212529;font-size:18px;font-weight:600;margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid #d97706}.preview-card[_ngcontent-%COMP%]{border:2px dashed #e9ecef;border-radius:8px;padding:20px;background:#f8fafc}.preview-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.preview-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#212529;font-size:16px;font-weight:600;margin:0}.preview-status[_ngcontent-%COMP%]{padding:.25rem .6rem;border-radius:12px;font-size:.75rem;font-weight:600;text-transform:uppercase}.preview-status.status-active[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46}.preview-status.status-inactive[_ngcontent-%COMP%]{background-color:#fee2e2;color:#dc2626}.preview-status.status-out_of_stock[_ngcontent-%COMP%]{background-color:#fef3c7;color:#d97706}.preview-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:#6c757d;font-size:14px}.detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#212529;font-size:14px}.detail-item[_ngcontent-%COMP%]   .value.price[_ngcontent-%COMP%]{color:#16a34a;font-weight:700;font-size:16px}.china-stock-preview[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .value.price[_ngcontent-%COMP%]{color:#d97706}@media (max-width: 1024px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem;padding:15px}.thai-stock-form[_ngcontent-%COMP%], .china-stock-form[_ngcontent-%COMP%]{padding:30px}.thai-stock-preview[_ngcontent-%COMP%], .china-stock-preview[_ngcontent-%COMP%]{position:static}}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:10px}.field-row[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.thai-stock-form[_ngcontent-%COMP%], .china-stock-form[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.submit-btn[_ngcontent-%COMP%], .back-btn[_ngcontent-%COMP%]{width:100%;padding:16px}}@media (max-width: 480px){.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.thai-stock-form[_ngcontent-%COMP%], .china-stock-form[_ngcontent-%COMP%]{padding:15px}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}.submit-btn[_ngcontent-%COMP%]:active{animation:_ngcontent-%COMP%_pulse .3s ease-in-out}`]})};export{$ as ChinaStockAddComponent};
