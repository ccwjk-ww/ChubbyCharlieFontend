import{a as V}from"./chunk-QSMWRQZS.js";import{b as D,c as h,d as N,e as y,h as A,j as z,m as G,n as T,o as j,p as R,t as B,v as q}from"./chunk-32P7OPYT.js";import{b as I,d as F}from"./chunk-ACYYDNGN.js";import"./chunk-ZATVBB7N.js";import{Bb as n,Cb as p,Db as C,Ha as a,La as m,Ra as M,Wa as u,a as L,b as S,ec as w,gc as O,hb as s,ib as o,jb as e,jc as E,kb as d,rb as _,tb as P,zb as g}from"./chunk-45HGJHZR.js";function Y(l,i){l&1&&(o(0,"div",29),n(1," Lot name is required and must be at least 2 characters "),e())}function H(l,i){l&1&&(o(0,"div",29),n(1," Status is required "),e())}function J(l,i){l&1&&d(0,"i",30)}function K(l,i){l&1&&d(0,"i",31)}function Q(l,i){if(l&1&&(o(0,"div",32)(1,"h3"),n(2,"Stock Lot Preview"),e(),o(3,"div",33)(4,"div",34)(5,"h4"),n(6),e(),o(7,"span",35),n(8),e()(),o(9,"div",36)(10,"div",37)(11,"span",38),n(12,"Import Date:"),e(),o(13,"span",39),n(14),e()(),o(15,"div",37)(16,"span",38),n(17,"Arrival Date:"),e(),o(18,"span",39),n(19),e()()()()()),l&2){let r=P();a(6),p(r.stockLotForm.value.lotName||"Lot Name"),a(),s("ngClass","status-"+(r.stockLotForm.value.status||"PENDING").toLowerCase()),a(),C(" ",r.stockLotForm.value.status||"PENDING"," "),a(6),p(r.stockLotForm.value.importDate||"Not set"),a(5),p(r.stockLotForm.value.arrivalDate||"Not set")}}var U=class l{constructor(i,r,t,c){this.fb=i;this.stockLotService=r;this.router=t;this.route=c;this.stockLotForm=this.fb.group({lotName:["",[h.required,h.minLength(2)]],importDate:[""],arrivalDate:[""],status:["PENDING",h.required]})}stockLotForm;isEditMode=!1;stockLotId=null;ngOnInit(){this.stockLotId=this.route.snapshot.paramMap.get("id")?Number(this.route.snapshot.paramMap.get("id")):null,this.isEditMode=!!this.stockLotId,this.isEditMode&&this.loadStockLot()}loadStockLot(){this.stockLotId&&this.stockLotService.getStockLotById(this.stockLotId).subscribe({next:i=>{this.stockLotForm.patchValue({lotName:i.lotName,importDate:i.importDate?this.formatDateForInput(i.importDate):"",arrivalDate:i.arrivalDate?this.formatDateForInput(i.arrivalDate):"",status:i.status||"PENDING"})},error:i=>console.error("Error loading stock lot:",i)})}onSubmit(){if(this.stockLotForm.valid){let i=S(L({},this.stockLotForm.value),{importDate:this.stockLotForm.value.importDate||void 0,arrivalDate:this.stockLotForm.value.arrivalDate||void 0});this.isEditMode&&this.stockLotId?this.stockLotService.updateStockLot(this.stockLotId,i).subscribe({next:()=>{alert("\u2705 Stock lot updated successfully!"),this.router.navigate(["/stock-lots"])},error:r=>{console.error("Error updating stock lot:",r);let t=r.error?.message||"\u0E40\u0E01\u0E34\u0E14\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14";alert("\u274C Error: "+t)}}):this.stockLotService.createStockLot(i).subscribe({next:r=>{alert(`\u2705 Stock Lot \u0E2A\u0E23\u0E49\u0E32\u0E07\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!

\u0E04\u0E38\u0E13\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E40\u0E02\u0E49\u0E32 Stock Lot \u0E44\u0E14\u0E49\u0E41\u0E25\u0E49\u0E27
\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E40\u0E2A\u0E23\u0E47\u0E08 \u0E43\u0E2B\u0E49\u0E04\u0E25\u0E34\u0E01 "Complete & Create Transaction"`),this.resetForm(),this.router.navigate(["/stock-lots",r.stockLotId])},error:r=>{console.error("Error adding stock lot:",r);let t=r.error?.message||"\u0E40\u0E01\u0E34\u0E14\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14";alert("\u274C Error: "+t)}})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.stockLotForm.controls).forEach(i=>{this.stockLotForm.get(i)?.markAsTouched()})}resetForm(){this.stockLotForm.reset(),this.stockLotForm.patchValue({status:"PENDING"})}formatDateForInput(i){return new Date(i).toISOString().slice(0,16)}goBack(){this.router.navigate(["/stock-lots"])}static \u0275fac=function(r){return new(r||l)(m(B),m(V),m(F),m(I))};static \u0275cmp=M({type:l,selectors:[["app-stock-lot-add"]],decls:51,vars:18,consts:[[1,"main-container"],[1,"container"],[1,"page-header"],[1,"stock-lot-form",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-fields"],[1,"field-row"],[1,"form-group"],["for","lotName"],[1,"required"],["id","lotName","formControlName","lotName","placeholder","Enter lot name (e.g., LOT-2024-001)",1,"form-control"],["class","error-message",4,"ngIf"],["for","status"],["id","status","formControlName","status",1,"form-control"],["value","PENDING"],["value","ARRIVED"],["value","COMPLETED"],["value","CANCELLED"],["for","importDate"],["id","importDate","formControlName","importDate","type","datetime-local",1,"form-control"],["for","arrivalDate"],["id","arrivalDate","formControlName","arrivalDate","type","datetime-local",1,"form-control"],[1,"form-actions"],["type","button",1,"back-btn",3,"click"],[1,"bi","bi-arrow-left"],["type","submit",1,"submit-btn",3,"disabled"],["class","bi bi-check-circle",4,"ngIf"],["class","bi bi-pencil-square",4,"ngIf"],["class","stock-lot-preview",4,"ngIf"],[1,"error-message"],[1,"bi","bi-check-circle"],[1,"bi","bi-pencil-square"],[1,"stock-lot-preview"],[1,"preview-card"],[1,"preview-header"],[1,"preview-status",3,"ngClass"],[1,"preview-details"],[1,"detail-item"],[1,"label"],[1,"value"]],template:function(r,t){if(r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),n(4),e(),o(5,"p"),n(6),e()(),o(7,"form",3),_("ngSubmit",function(){return t.onSubmit()}),o(8,"div",4)(9,"div",5)(10,"div",6)(11,"div",7)(12,"label",8),n(13,"Lot Name "),o(14,"span",9),n(15,"*"),e()(),d(16,"input",10),u(17,Y,2,0,"div",11),e(),o(18,"div",7)(19,"label",12),n(20,"Status "),o(21,"span",9),n(22,"*"),e()(),o(23,"select",13)(24,"option",14),n(25,"Pending"),e(),o(26,"option",15),n(27,"Arrived"),e(),o(28,"option",16),n(29,"Completed"),e(),o(30,"option",17),n(31,"Cancelled"),e()(),u(32,H,2,0,"div",11),e()(),o(33,"div",6)(34,"div",7)(35,"label",18),n(36,"Import Date"),e(),d(37,"input",19),e(),o(38,"div",7)(39,"label",20),n(40,"Arrival Date"),e(),d(41,"input",21),e()()()(),o(42,"div",22)(43,"button",23),_("click",function(){return t.goBack()}),d(44,"i",24),n(45," Back "),e(),o(46,"button",25),u(47,J,1,0,"i",26)(48,K,1,0,"i",27),n(49),e()()(),u(50,Q,20,5,"div",28),e()()),r&2){let c,f,v,x,b,k;a(4),p(t.isEditMode?"Edit Stock Lot":"New Stock Lot"),a(2),p(t.isEditMode?"Update stock lot details":"Create a new stock lot entry"),a(),s("formGroup",t.stockLotForm),a(9),g("error",((c=t.stockLotForm.get("lotName"))==null?null:c.invalid)&&((c=t.stockLotForm.get("lotName"))==null?null:c.touched)),a(),s("ngIf",((f=t.stockLotForm.get("lotName"))==null?null:f.invalid)&&((f=t.stockLotForm.get("lotName"))==null?null:f.touched)),a(6),g("error",((v=t.stockLotForm.get("status"))==null?null:v.invalid)&&((v=t.stockLotForm.get("status"))==null?null:v.touched)),a(9),s("ngIf",((x=t.stockLotForm.get("status"))==null?null:x.invalid)&&((x=t.stockLotForm.get("status"))==null?null:x.touched)),a(5),g("error",((b=t.stockLotForm.get("importDate"))==null?null:b.invalid)&&((b=t.stockLotForm.get("importDate"))==null?null:b.touched)),a(4),g("error",((k=t.stockLotForm.get("arrivalDate"))==null?null:k.invalid)&&((k=t.stockLotForm.get("arrivalDate"))==null?null:k.touched)),a(5),s("disabled",t.stockLotForm.invalid),a(),s("ngIf",!t.isEditMode),a(),s("ngIf",t.isEditMode),a(),C(" ",t.isEditMode?"Update Stock Lot":"Add Stock Lot"," "),a(),s("ngIf",t.stockLotForm.value.lotName)}},dependencies:[q,A,j,R,D,T,N,y,z,G,E,w,O],styles:[`.main-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;margin:1rem;padding:1.5rem;background-color:#fff;border-radius:1rem;box-shadow:0 2px 8px #0000000d;border:1px solid #e5e7eb;min-height:calc(100vh - 2rem);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;box-sizing:border-box}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;display:grid;grid-template-columns:2fr 1fr;gap:2rem}.back-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#495057);border:none;color:#fff;padding:14px 32px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:140px;display:flex;align-items:center;gap:8px;justify-content:center;box-shadow:0 2px 8px #00000026}.back-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#495057,#343a40);transform:translateY(-2px);box-shadow:0 4px 12px #0003}.page-header[_ngcontent-%COMP%]{margin-bottom:40px;grid-column:1 / -1}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin:0 0 5px;color:#212529}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;margin:0;font-size:16px}.stock-lot-form[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:40px;box-shadow:0 2px 20px #00000014;border:1px solid #e9ecef}.form-row[_ngcontent-%COMP%]{display:block;margin-bottom:40px}.form-fields[_ngcontent-%COMP%]{flex:1}.field-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:25px}.form-group[_ngcontent-%COMP%]{flex:1;position:relative}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#212529;font-size:14px}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #dee2e6;border-radius:8px;font-size:14px;transition:all .3s ease;background-color:#fff;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#0ea5e9;box-shadow:0 0 0 3px #0ea5e91a;background-color:#fff}.form-control.error[_ngcontent-%COMP%]{border-color:#dc3545;background-color:#fff5f5}select.form-control[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");background-position:right 12px center;background-repeat:no-repeat;background-size:16px;appearance:none;padding-right:40px}.error-message[_ngcontent-%COMP%]{margin-top:5px;font-size:12px;color:#dc3545;font-weight:500}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;gap:20px;padding:20px 0;border-top:1px solid #e9ecef}.submit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0ea5e9,#0284c7);color:#fff;border:none;padding:14px 32px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;min-width:140px;display:flex;align-items:center;gap:8px;justify-content:center;box-shadow:0 2px 8px #0ea5e933}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 15px #0ea5e94d;background:linear-gradient(135deg,#0284c7,#0369a1)}.submit-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none;opacity:.6}.stock-lot-preview[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;box-shadow:0 2px 20px #00000014;border:1px solid #e9ecef;height:fit-content;position:sticky;top:20px}.stock-lot-preview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#212529;font-size:18px;font-weight:600;margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid #0ea5e9}.preview-card[_ngcontent-%COMP%]{border:2px dashed #e9ecef;border-radius:8px;padding:20px;background:#f8fafc}.preview-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.preview-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#212529;font-size:16px;font-weight:600;margin:0}.preview-status[_ngcontent-%COMP%]{padding:.25rem .6rem;border-radius:12px;font-size:.75rem;font-weight:600;text-transform:uppercase}.preview-status.status-pending[_ngcontent-%COMP%]{background-color:#fef3c7;color:#d97706}.preview-status.status-in_transit[_ngcontent-%COMP%]{background-color:#dbeafe;color:#2563eb}.preview-status.status-arrived[_ngcontent-%COMP%], .preview-status.status-completed[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46}.preview-status.status-cancelled[_ngcontent-%COMP%]{background-color:#fee2e2;color:#dc2626}.preview-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:#6c757d;font-size:14px}.detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500;color:#212529;font-size:14px}.detail-item[_ngcontent-%COMP%]   .value.price[_ngcontent-%COMP%]{color:#0ea5e9;font-weight:700;font-size:16px}@media (max-width: 1024px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem;padding:15px}.stock-lot-form[_ngcontent-%COMP%]{padding:30px}.stock-lot-preview[_ngcontent-%COMP%]{position:static}}@media (max-width: 768px){.field-row[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.stock-lot-form[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}}`]})};export{U as StockLotAddComponent};
