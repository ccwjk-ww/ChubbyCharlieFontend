<!-- Full Page Chat Container -->
<div class="chat-page">

  <!-- Header Bar -->
  <div class="chat-header">
    <div class="header-left">
      <div class="bot-avatar-large">ü§ñ</div>
      <div class="header-info">
        <h1>Chubby AI Assistant</h1>
        <p class="subtitle">
          <span class="status-dot"></span>
          ‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ ‚Ä¢ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
        </p>
      </div>
    </div>

    <div class="header-actions">
      <button class="action-btn" (click)="exportChat()" title="Export Chat">
        <span class="icon">üì•</span>
        <span class="label">Export</span>
      </button>
      <button class="action-btn" (click)="clearChat()" title="Clear Chat">
        <span class="icon">üóëÔ∏è</span>
        <span class="label">Clear</span>
      </button>
      <button class="action-btn" (click)="refreshChat()" title="Refresh">
        <span class="icon">üîÑ</span>
        <span class="label">Refresh</span>
      </button>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="chat-content">

    <!-- Sidebar with Quick Questions -->
    <div class="sidebar">
      <div class="sidebar-header">
        <h3>üí¨ ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏î‡πà‡∏ß‡∏ô</h3>
        <p>‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</p>
      </div>

      <div class="quick-questions">
        <button
          *ngFor="let q of quickQuestions"
          class="quick-question-btn"
          [style.border-left-color]="q.color"
          (click)="sendQuickQuestion(q.text)"
          [disabled]="isLoading">
          <span class="q-icon">{{ q.icon }}</span>
          <span class="q-text">{{ q.text }}</span>
        </button>
      </div>

      <!-- Tips Section -->
      <div class="tips-section">
        <h4>üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h4>
        <ul>
          <li>‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©</li>
          <li>‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏à‡∏≤‡∏∞‡∏à‡∏á</li>
          <li>‡∏Å‡∏î Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</li>
          <li>Shift + Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà</li>
        </ul>
      </div>
    </div>

    <!-- Messages Area -->
    <div class="messages-container" #messageContainer>

      <!-- Empty State -->
      <div class="empty-state" *ngIf="messages.length === 0">
        <div class="empty-icon">üí¨</div>
        <h2>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤</h2>
        <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏î‡πà‡∏ß‡∏ô‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ ‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</p>
      </div>

      <!-- Messages -->
      <div class="messages-list">
        <div
          *ngFor="let message of messages; let i = index"
          class="message-wrapper"
          [class.user-message]="message.isUser"
          [class.bot-message]="!message.isUser">

          <!-- Bot Message -->
          <div class="message-row" *ngIf="!message.isUser">
            <div class="message-avatar">
              <span class="avatar-icon">ü§ñ</span>
            </div>
            <div class="message-content">
              <div class="message-header">
                <span class="sender-name">Chubby AI</span>
                <span class="message-time">{{ message.timestamp | date: 'short' }}</span>
              </div>
              <div class="message-bubble bot-bubble">
                <div class="message-text" [innerHTML]="message.text | nl2br"></div>
              </div>
            </div>
          </div>

          <!-- User Message -->
          <div class="message-row" *ngIf="message.isUser">
            <div class="message-content user-content">
              <div class="message-header">
                <span class="message-time">{{ message.timestamp | date: 'short' }}</span>
                <span class="sender-name">‡∏Ñ‡∏∏‡∏ì</span>
              </div>
              <div class="message-bubble user-bubble">
                <div class="message-text" [innerHTML]="message.text | nl2br"></div>
              </div>
            </div>
            <div class="message-avatar">
              <span class="avatar-icon">üë§</span>
            </div>
          </div>
        </div>

        <!-- Loading Indicator -->
        <div class="message-wrapper bot-message" *ngIf="isLoading">
          <div class="message-row">
            <div class="message-avatar">
              <span class="avatar-icon">ü§ñ</span>
            </div>
            <div class="message-content">
              <div class="message-header">
                <span class="sender-name">Chubby AI</span>
                <span class="message-time">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå...</span>
              </div>
              <div class="message-bubble bot-bubble loading">
                <div class="typing-indicator">
                  <span></span>
                  <span></span>
                  <span></span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Input Area -->
  <div class="chat-input-area">
    <div class="input-container">
      <textarea
        [(ngModel)]="currentMessage"
        (keypress)="onKeyPress($event)"
        placeholder="üí¨ ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà... (‡∏Å‡∏î Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á, Shift+Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà)"
        rows="1"
        [disabled]="isLoading"
        class="message-input"></textarea>

      <button
        (click)="sendMessage()"
        [disabled]="!currentMessage.trim() || isLoading"
        class="send-button"
        title="‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°">
        <span class="send-icon">üì§</span>
        <span class="send-label">‡∏™‡πà‡∏á</span>
      </button>
    </div>
  </div>

</div>
